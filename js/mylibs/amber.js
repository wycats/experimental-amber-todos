/* >>>>>>>>>> BEGIN source/license.js *//**
 * @license
 * ==========================================================================
 * SproutCore Costello -- Property Observing Library
 * Copyright ©2006-2011, Strobe Inc. and contributors.
 * Portions copyright ©2008-2011 Apple Inc. All rights reserved.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a 
 * copy of this software and associated documentation files (the "Software"), 
 * to deal in the Software without restriction, including without limitation 
 * the rights to use, copy, modify, merge, publish, distribute, sublicense, 
 * and/or sell copies of the Software, and to permit persons to whom the 
 * Software is furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 * For more information about SproutCore, visit http://www.sproutcore.com
 * 
 * ==========================================================================
 *//* >>>>>>>>>> BEGIN source/core.js */// ==========================================================================
// Project:   SproutCore Costello - Property Observing Library
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================
/*global NodeList */// These commands are used by the build tools to control load order.  On the
// client side these are a no-op.
function findClassNames(){if(!SC._object_foundObjectClassNames){SC._object_foundObjectClassNames=!0;var a=[],b=!1,c=function(d,e,f){f--;if(!(a.indexOf(e)>=0)){a.push(e);for(var g in e){if(g=="__scope__")continue;if(g=="superclass")continue;g=="__SC__"&&(g="SC");if(!g.match(/^[A-Z0-9]/))continue;if(g=="SC"){if(b)continue;b=!0}var h=d?[d,g].join("."):g,i=e[g];try{var j=SC.typeOf(i)}catch(k){break}switch(j){case SC.T_CLASS:i._object_className||(i._object_className=h),f>=0&&c(h,i,f);break;case SC.T_OBJECT:f>=0&&c(h,i,f);break;case SC.T_HASH:(d||h==="SC")&&f>=0&&c(h,i,f);break;default:}}}};window.__SC__=SC,c(null,window,2)}}window.require||(window.require=function require(){}),window.sc_require||(window.sc_require=require),window.sc_resource||(window.sc_resource=function(){}),sc_require("license"),window.YES=!0,window.NO=!1,typeof console=="undefined"&&(window.console={},console.log=console.info=console.warn=console.error=function(){}),window.SC=window.SC||{},window.SproutCore=window.SproutCore||SC,SC.VERSION="1.6.0.pre",SC._baseMixin=function(a){var b=Array.prototype.slice.call(arguments,1),c,d=b[0]||{},e=1,f=b.length,g,h,i;f===1&&(d=this||{},e=0);for(;e<f;e++){if(!(g=b[e]))continue;for(i in g){if(!g.hasOwnProperty(i))continue;h=g[i];if(d===h)continue;h!==undefined&&(a||d[i]===undefined)&&(d[i]=h)}}return d},SC.mixin=function(){var a=Array.prototype.slice.call(arguments);a.unshift(!0);return SC._baseMixin.apply(this,a)},SC.supplement=function(){var a=Array.prototype.slice.call(arguments);a.unshift(!1);return SC._baseMixin.apply(this,a)},SC.extend=SC.mixin,SC.mixin({T_ERROR:"error",T_OBJECT:"object",T_NULL:"null",T_CLASS:"class",T_HASH:"hash",T_FUNCTION:"function",T_UNDEFINED:"undefined",T_NUMBER:"number",T_BOOL:"boolean",T_ARRAY:"array",T_STRING:"string",typeOf:function(a){if(a===undefined)return SC.T_UNDEFINED;if(a===null)return SC.T_NULL;var b=jQuery.type(a);if(b==="function")return a.isClass?SC.T_CLASS:SC.T_FUNCTION;if(b==="object")return a.isError?SC.T_ERROR:a.isObject?SC.T_OBJECT:SC.T_HASH;return b},none:function(a){return a==null},empty:function(a){return a===null||a===undefined||a===""},isArray:function(a){if(!a||a.setInterval)return!1;if(Array.isArray&&Array.isArray(a))return!0;if(a.objectAt)return!0;if(a.length!==undefined&&jQuery.type(a)==="object")return!0;return!1},makeArray:function(a){return SC.isArray(a)?a:SC.A(a)},A:function(a){if(a===null||a===undefined)return[];if(a.slice instanceof Function)return typeof a=="string"?[a]:a.slice();if(a.toArray)return a.toArray();if(!SC.isArray(a))return[a];var b=[],c=a.length;while(--c>=0)b[c]=a[c];return b},guidKey:jQuery.expando||"SproutCore"+(SC.VERSION+Math.random()).replace(/\D/g,""),_guidPrefixes:{number:"nu",string:"st"},_guidCaches:{number:{},string:{}},_numberGuids:[],_stringGuids:{},_keyCache:{},guidFor:function(a){var b,c,d=typeof a;if(a===undefined)return"(undefined)";if(a===null)return"(null)";if(d===SC.T_NUMBER||d===SC.T_STRING){b=this._guidCaches[d],c=b[a],c||(c="st"+jQuery.uuid++,b[a]=c);return c}if(d===SC.T_BOOL)return a?"(true)":"(false)";var e=this.guidKey;if(a[e])return a[e];if(a===Object)return"(Object)";if(a===Array)return"(Array)";return SC.generateGuid(a,"sc")},keyFor:function(a,b){var c,d=this._keyCache[a];d||(d=this._keyCache[a]={}),c=d[b],c||(c=d[b]=a+"_"+b);return c},generateGuid:function(a,b){var c=b+jQuery.uuid++;a&&(a[this.guidKey]=c);return c},hashFor:function(){var a=arguments.length,b="",c,d,e;for(e=0;e<a;++e)c=arguments[e],b+=c&&(d=c.hash)&&typeof d===SC.T_FUNCTION?d.call(c):this.guidFor(c);return b===""?null:b},isEqual:function(a,b){return this.hashFor(a)===this.hashFor(b)},compare:function(a,b){if(a===b)return 0;var c=SC.typeOf(a),d=SC.typeOf(b),e=SC.ORDER_DEFINITION_MAPPING;if(!e){var f=SC.ORDER_DEFINITION;e=SC.ORDER_DEFINITION_MAPPING={};var g,h;for(g=0,h=f.length;g<h;++g)e[f[g]]=g;delete SC.ORDER_DEFINITION}var i=e[c],j=e[d];if(i<j)return-1;if(i>j)return 1;switch(c){case SC.T_BOOL:case SC.T_NUMBER:if(a<b)return-1;if(a>b)return 1;return 0;case SC.T_STRING:var k=a.localeCompare(b);if(k<0)return-1;if(k>0)return 1;return 0;case SC.T_ARRAY:var l=a.length,m=b.length,n=Math.min(l,m),o=0,p=0,q=arguments.callee;while(o===0&&p<n)o=q(a[p],b[p]),p++;if(o!==0)return o;if(l<m)return-1;if(l>m)return 1;return 0;case SC.T_OBJECT:if(a.constructor.isComparable===YES)return a.constructor.compare(a,b);return 0;default:return 0}},K:function(){return this},EMPTY_ARRAY:[],EMPTY_HASH:{},EMPTY_RANGE:{start:0,length:0},beget:function(a){if(a===null||a===undefined)return null;var b=SC.K;b.prototype=a;var c=new b;b.prototype=null,typeof a.didBeget=="function"&&(c=a.didBeget(c));return c},copy:function(a,b){var c=a,d;if(a){if(a.isCopyable)return a.copy(b);if(a.clone)return a.clone()}switch(jQuery.type(a)){case"array":c=a.slice();if(b){d=c.length;while(d--)c[d]=SC.copy(c[d],!0)}break;case"object":c={};for(var e in a)c[e]=b?SC.copy(a[e],!0):a[e]}return c},merge:function(){var a={},b=arguments.length,c;for(c=0;c<b;c++)SC.mixin(a,arguments[c]);return a},keys:function(a){var b=[];for(var c in a)b.push(c);return b},inspect:function(a){var b,c=[];for(var d in a){b=a[d];if(b==="toString")continue;SC.typeOf(b)===SC.T_FUNCTION&&(b="function() { ... }"),c.push(d+": "+b)}return"{"+c.join(" , ")+"}"},tupleForPropertyPath:function(a,b){if(typeof a=="object"&&a instanceof Array)return a;var c,d=a.indexOf("*");d<0&&(d=a.lastIndexOf(".")),c=d>=0?a.slice(d+1):a;var e=this.objectForPropertyPath(a,b,d);return e&&c?[e,c]:null},objectForPropertyPath:function(a,b,c){var d,e,f,g;b||(b=window);if(SC.typeOf(a)===SC.T_STRING){c===undefined&&(c=a.length),d=0;while(b&&d<c){e=a.indexOf(".",d);if(e<0||e>c)e=c;f=a.slice(d,e),b=b.get?b.get(f):b[f],d=e+1}d<c&&(b=undefined)}else{d=0,g=a.length,f=null;while(d<g&&b)f=a[d++],f&&(b=b.get?b.get(f):b[f]);d<g&&(b=undefined)}return b}}),SC.clone=SC.copy,SC.$A=SC.A,SC.didLoad=SC.K,SC.ORDER_DEFINITION=[SC.T_ERROR,SC.T_UNDEFINED,SC.T_NULL,SC.T_BOOL,SC.T_NUMBER,SC.T_STRING,SC.T_ARRAY,SC.T_HASH,SC.T_OBJECT,SC.T_FUNCTION,SC.T_CLASS],SC.Function={property:function(a,b){a.dependentKeys=SC.$A(b);var c=SC.guidFor(a);a.cacheKey="__cache__"+c,a.lastSetValueKey="__lastValue__"+c,a.isProperty=!0;return a},cacheable:function(a,b){a.isProperty=!0,a.dependentKeys||(a.dependentKeys=[]),a.isCacheable=b===undefined?!0:b;return a},idempotent:function(a,b){a.isProperty=!0,a.dependentKeys||(this.dependentKeys=[]),a.isVolatile=b===undefined?!0:b;return a},enhance:function(a){a.isEnhancement=!0;return a},observes:function(a,b){var c=b.length,d=null,e=null;while(--c>=0){var f=b[c];f.indexOf(".")<0&&f.indexOf("*")<0?(d||(d=a.localPropertyPaths=[]),d.push(f)):(e||(e=a.propertyPaths=[]),e.push(f))}return a}},sc_require("system/function"),SC.mixin(Function.prototype,{property:function(){return SC.Function.property(this,arguments)},cacheable:function(a){return SC.Function.cacheable(this,a)},idempotent:function(a){return SC.Function.idempotent(this,a)},enhance:function(){return SC.Function.enhance(this)},observes:function(a){return SC.Function.observes(this,arguments)}}),SC.ObserverSet={add:function(a,b,c){var d=SC.guidFor(a),e=SC.guidFor(b),f=this._members,g=this.members,h=f[d];h||(h=f[d]={});if(h[e]===undefined)h[e]=g.length;else return;g.push([a,b,c])},remove:function(a,b){var c=SC.guidFor(a),d=SC.guidFor(b),e=this._members[c],f=this.members;if(!e)return!1;var g=e[d];if(g===undefined)return!1;if(g!==f.length-1){var h=f[g]=f[f.length-1];this._members[SC.guidFor(h[0])][SC.guidFor(h[1])]=g}f.pop(),delete this._members[c][d];return!0},invokeMethods:function(){var a=this.members,b;for(var c=0,d=a.length;c<d;c++)b=a[c],b[1].call(b[0])},clone:function(){var a=SC.ObserverSet.create(),b=this.members;a._members=SC.clone(this._members);var c=a.members;for(var d=0,e=b.length;d<e;d++)c[d]=SC.clone(b[d]),c[d].length=3;return a},create:function(){return new SC.ObserverSet.constructor},getMembers:function(){return this.members.slice(0)},constructor:function(){this._members={},this.members=[]}},SC.ObserverSet.constructor.prototype=SC.ObserverSet,SC.ObserverSet.slice=SC.ObserverSet.clone,SC._ChainObserver=function(a,b){this.property=a,this.root=b||this},SC._ChainObserver.createChain=function(a,b,c,d,e){var f=b.split("."),g=new SC._ChainObserver(f[0]),h=g;for(var i=1,j=f.length;i<j;i++)h=h.next=new SC._ChainObserver(f[i],g);var k=g.tails=[h];g.objectDidChange(a),k.forEach(function(a){a.target=c,a.method=d,a.context=e}),g.tails=null;return g},SC._ChainObserver.prototype={isChainObserver:!0,object:null,property:null,next:null,root:null,target:null,method:null,tail:function(){if(this._tail)return this._tail;var a=this;while(a.next)a=a.next;this._tail=a;return a},objectDidChange:function(a){a!==this.object&&(this.object&&(this.property==="@each"&&this.object._removeContentObserver?this.object._removeContentObserver(this):this.object.removeObserver&&this.object.removeObserver(this.property,this,this.propertyDidChange)),this.object=a,this.property==="@each"&&this.next?this.object&&this.object._addContentObserver&&this.object._addContentObserver(this):(this.object&&this.object.addObserver&&this.object.addObserver(this.property,this,this.propertyDidChange),this.propertyDidChange()))},propertyDidChange:function(){var a=this.object,b=this.property,c=a&&a.get?a.get(b):null;this.next&&this.next.objectDidChange(c);var d=this.target,e=this.method,f=this.context;if(d&&e){var g=a?a.propertyRevision:null;f?e.call(d,a,b,c,f,g):e.call(d,a,b,c,g)}},destroyChain:function(){var a=this.object;a&&a.removeObserver&&a.removeObserver(this.property,this,this.propertyDidChange),this.next&&this.next.destroyChain(),this.next=this.target=this.method=this.object=this.context=null;return null}},sc_require("ext/function"),sc_require("private/observer_set"),sc_require("private/chain_observer"),SC.LOG_OBSERVERS=NO,SC.Observable={isObservable:YES,automaticallyNotifiesObserversFor:function(a){return YES},get:function(a){var b=this[a],c;if(b===undefined)return this.unknownProperty(a);if(b&&b.isProperty){if(b.isCacheable){c=this._kvo_cache,c||(c=this._kvo_cache={});return c[b.cacheKey]!==undefined?c[b.cacheKey]:c[b.cacheKey]=b.call(this,a)}return b.call(this,a)}return b},set:function(a,b){var c=this[a],d=this.automaticallyNotifiesObserversFor(a),e=b,f,g,h,i;if(b===undefined&&SC.typeOf(a)===SC.T_HASH){var j=a;for(a in j){if(!j.hasOwnProperty(a))continue;this.set(a,j[a])}return this}if(!d&&this._kvo_cacheable&&(g=this._kvo_cache)){f=this._kvo_cachedep;if(!f||(f=f[a])===undefined)f=this._kvo_computeCachedDependentsFor(a);if(f){h=f.length;while(--h>=0)i=f[h],g[i.cacheKey]=g[i.lastSetValueKey]=undefined}}if(c&&c.isProperty){g=this._kvo_cache;if(c.isVolatile||!g||g[c.lastSetValueKey]!==b)g||(g=this._kvo_cache={}),g[c.lastSetValueKey]=b,d&&this.propertyWillChange(a),e=c.call(this,a,b),c.isCacheable&&(g[c.cacheKey]=e),d&&this.propertyDidChange(a,e,YES)}else c===undefined?(d&&this.propertyWillChange(a),this.unknownProperty(a,b),d&&this.propertyDidChange(a,e)):this[a]!==b&&(d&&this.propertyWillChange(a),e=this[a]=b,d&&this.propertyDidChange(a,e));return this},unknownProperty:function(a,b){b!==undefined&&(this[a]=b);return b},beginPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;return this},endPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;var a=this._kvo_changeLevel,b=this._kvo_changes;a<=0&&b&&b.length>0&&!SC.Observers.isObservingSuspended&&this._notifyPropertyObservers();return this},propertyWillChange:function(a){return this},propertyDidChange:function(a,b,c){this._kvo_revision=(this._kvo_revision||0)+1;var d=this._kvo_changeLevel||0,e,f,g,h,i=SC.LOG_OBSERVERS&&this.LOG_OBSERVING!==NO,j=this._kvo_property_chains;if(j){var k=j[a];k&&(this.beginPropertyChanges(),k=SC.clone(k),k.forEach(function(a){a.notifyPropertyDidChange()}),this.endPropertyChanges())}var l=this._kvo_cache;if(l){c||(h=this[a],h&&h.isProperty&&(l[h.cacheKey]=l[h.lastSetValueKey]=undefined));if(this._kvo_cacheable){e=this._kvo_cachedep;if(!e||(e=e[a])===undefined)e=this._kvo_computeCachedDependentsFor(a);if(e){f=e.length;while(--f>=0)g=e[f],l[g.cacheKey]=l[g.lastSetValueKey]=undefined}}}var m=SC.Observers.isObservingSuspended;if(d>0||m){var n=this._kvo_changes;n||(n=this._kvo_changes=SC.CoreSet.create()),n.add(a),m&&(i&&SC.Logger.log("%@%@: will not notify observers because observing is suspended".fmt(SC.KVO_SPACES,this)),SC.Observers.objectHasPendingChanges(this))}else this._notifyPropertyObservers(a);return this},registerDependentKey:function(a,b){var c=this._kvo_dependents,d=this._kvo_chain_dependents,e=this[a],f,g,h,i,j;typeof b=="object"&&b instanceof Array?(f=b,h=0):(f=arguments,h=1),g=f.length,c||(this._kvo_dependents=c={});while(--g>=h)i=f[g],i.indexOf(".")>=0?SC._PropertyChain.createChain(i,this,a).activate():(j=c[i],j||(j=c[i]=[]),j.push(a))},registerDependentKeyWithChain:function(a,b){var c=this._chainsFor(a),d;c.add(b)},removeDependentKeyWithChain:function(a,b){var c=this._chainsFor(a),d;c.remove(b),c.get("length")===0&&delete this._kvo_property_chains[a]},_chainsFor:function(a){this._kvo_property_chains=this._kvo_property_chains||{};var b=this._kvo_property_chains[a]||SC.CoreSet.create();this._kvo_property_chains[a]=b;return b},_kvo_addCachedDependents:function(a,b,c,d){var e=b.length,f,g,h;while(--e>=0)g=b[e],d.add(g),f=this[g],f&&f instanceof Function&&f.isProperty&&(f.isCacheable&&a.push(f),(h=c[g])&&h.length>0&&this._kvo_addCachedDependents(a,h,c,d))},_kvo_computeCachedDependentsFor:function(a){var b=this._kvo_cachedep,c=this._kvo_dependents,d=c?c[a]:null,e,f;b||(b=this._kvo_cachedep={});if(!d||d.length===0)return b[a]=null;e=b[a]=[],f=SC._TMP_SEEN_SET=SC._TMP_SEEN_SET||SC.CoreSet.create(),f.add(a),this._kvo_addCachedDependents(e,d,c,f),f.clear(),e.length===0&&(e=b[a]=null);return e},_kvo_for:function(a,b){var c=this[a];this._kvo_cloned||(this._kvo_cloned={}),c?this._kvo_cloned[a]||(c=this[a]=c.copy(),this._kvo_cloned[a]=YES):(c=this[a]=b===undefined?[]:b.create(),this._kvo_cloned[a]=YES);return c},addObserver:function(a,b,c,d){var e,f,g,h;c===undefined&&(c=b,b=this),b||(b=this),typeof c=="string"&&(c=b[c]);if(!c)throw"You must pass a method to addObserver()";a=a.toString(),a.indexOf(".")>=0?(f=SC._ChainObserver.createChain(this,a,b,c,d),f.masterTarget=b,f.masterMethod=c,this._kvo_for(SC.keyFor("_kvo_chains",a)).push(f)):(this[a]===undefined&&a.indexOf("@")===0&&this.get(a),b===this&&(b=null),e=SC.keyFor("_kvo_observers",a),this._kvo_for(e,SC.ObserverSet).add(b,c,d),this._kvo_for("_kvo_observed_keys",SC.CoreSet).add(a)),this.didAddObserver&&this.didAddObserver(a,b,c);return this},removeObserver:function(a,b,c){var d,e,f,g,h;c===undefined&&(c=b,b=this),b||(b=this),typeof c=="string"&&(c=b[c]);if(!c)throw"You must pass a method to removeObserver()";a=a.toString();if(a.indexOf(".")>=0){d=SC.keyFor("_kvo_chains",a);if(e=this[d]){e=this._kvo_for(d),h=e.length;while(--h>=0)f=e[h],f&&f.masterTarget===b&&f.masterMethod===c&&(e[h]=f.destroyChain())}}else{b===this&&(b=null),d=SC.keyFor("_kvo_observers",a);if(g=this[d])g=this._kvo_for(d),g.remove(b,c),g.getMembers().length===0&&this._kvo_for("_kvo_observed_keys",SC.CoreSet).remove(a)}this.didRemoveObserver&&this.didRemoveObserver(a,b,c);return this},hasObserverFor:function(a){SC.Observers.flush(this);var b=this[SC.keyFor("_kvo_observers",a)],c=this[SC.keyFor("_kvo_local",a)],d;if(c&&c.length>0)return YES;if(b&&b.getMembers().length>0)return YES;return NO},initObservable:function(){if(!this._observableInited){this._observableInited=YES;var a,b,c,d,e,f,g,h,i,j,k,l,m,n;if(b=this._observers){h=b.length;for(a=0;a<h;a++){c=b[a],e=this[c],f=e.propertyPaths,g=f?f.length:0;for(i=0;i<g;i++)j=f[i],k=j.indexOf("."),k<0?this.addObserver(j,this,e):j.indexOf("*")===0?this.addObserver(j.slice(1),this,e):(l=null,k===0?(l=this,j=j.slice(1)):k===4&&j.slice(0,5)==="this."?(l=this,j=j.slice(5)):k<0&&j.length===4&&j==="this"&&(l=this,j=""),SC.Observers.addObserver(j,this,e,l))}}this.bindings=[];if(b=this._bindings)for(a=0,n=b.length;a<n;a++)c=b[a],d=this[c],m=c.slice(0,-7),this[c]=this.bind(m,d);if(b=this._properties)for(a=0,n=b.length;a<n;a++){c=b[a];if(d=this[c])d.isCacheable&&(this._kvo_cacheable=YES),d.dependentKeys&&d.dependentKeys.length>0&&this.registerDependentKey(c,d.dependentKeys)}}},observersForKey:function(a){SC.Observers.flush(this);var b=this[SC.keyFor("_kvo_observers",a)];return b?b.getMembers():[]},_notifyPropertyObservers:function(a){this._observableInited||this.initObservable(),SC.Observers.flush(this);var b=SC.LOG_OBSERVERS&&this.LOG_OBSERVING!==NO,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;b&&(s=SC.KVO_SPACES=(SC.KVO_SPACES||"")+"  ",SC.Logger.log('%@%@: notifying observers after change to key "%@"'.fmt(s,this,a))),f=this["_kvo_observers_*"],this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;while((d=this._kvo_changes)&&d.length>0||a){i=++this.propertyRevision,d||(d=SC.CoreSet.create()),this._kvo_changes=null,a==="*"?(d.add("*"),d.addEach(this._kvo_for("_kvo_observed_keys",SC.CoreSet))):a&&d.add(a);if(e=this._kvo_dependents)for(g=0;g<d.length;g++){a=d[g],h=e[a];if(h&&(p=h.length)){b&&SC.Logger.log("%@...including dependent keys for %@: %@".fmt(s,a,h)),t=this._kvo_cache,t||(t=this._kvo_cache={});while(--p>=0){d.add(a=h[p]);if(q=this[a])this[q.cacheKey]=undefined,t[q.cacheKey]=t[q.lastSetValueKey]=undefined}}}while(d.length>0){a=d.pop(),c=this[SC.keyFor("_kvo_observers",a)];if(c){j=SC.clone(c.getMembers()),k=j.length;for(m=0;m<k;m++){l=j[m];if(l[3]===i)continue;l[1]||SC.Logger.log(l),n=l[0]||this,o=l[1],r=l[2],l[3]=i,b&&SC.Logger.log('%@...firing observer on %@ for key "%@"'.fmt(s,n,a)),r!==undefined?o.call(n,this,a,null,r,i):o.call(n,this,a,null,i)}}j=this[SC.keyFor("_kvo_local",a)];if(j){k=j.length;for(m=0;m<k;m++)l=j[m],o=this[l],o&&(b&&SC.Logger.log('%@...firing local observer %@.%@ for key "%@"'.fmt(s,this,l,a)),o.call(this,this,a,null,i))}if(f&&a!=="*"){j=SC.clone(f.getMembers()),k=j.length;for(m=0;m<k;m++)l=j[m],n=l[0]||this,o=l[1],r=l[2],b&&SC.Logger.log('%@...firing * observer on %@ for key "%@"'.fmt(s,n,a)),r!==undefined?o.call(n,this,a,null,r,i):o.call(n,this,a,null,i)}this.propertyObserver&&(b&&SC.Logger.log('%@...firing %@.propertyObserver for key "%@"'.fmt(s,this,a)),this.propertyObserver(this,a,null,i))}d&&d.destroy(),a=null}this._kvo_changeLevel=(this._kvo_changeLevel||1)-1,b&&(SC.KVO_SPACES=s.slice(0,-2));return YES},bind:function(a,b,c){var d,e;c!==undefined&&(b=[b,c]),e=typeof b,e==="string"||e==="object"&&b instanceof Array?(d=this[a+"BindingDefault"]||SC.Binding,d=d.beget().from(b)):d=b,d=d.to(a,this).connect(),this.bindings.push(d);return d},didChangeFor:function(a){var b,c,d,e,f,g,h,i,j;a=SC.hashFor(a),b=this._kvo_didChange_valueCache,b||(b=this._kvo_didChange_valueCache={}),c=this._kvo_didChange_revisionCache,c||(c=this._kvo_didChange_revisionCache={}),d=b[a]||{},e=c[a]||{},f=!1,g=this._kvo_revision||0,h=arguments.length;while(--h>=1)i=arguments[h],e[i]!=g&&(j=this.get(i),d[i]!==j&&(f=!0,d[i]=j)),e[i]=g;b[a]=d,c[a]=e;return f},setIfChanged:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){var c=a;for(a in c){if(!c.hasOwnProperty(a))continue;this.setIfChanged(a,c[a])}return this}return this.get(a)!==b?this.set(a,b):this},getPath:function(a){var b=SC.tupleForPropertyPath(a,this);if(b===null||b[0]===null)return undefined;return SC.get(b[0],b[1])},setPath:function(a,b){if(a.indexOf(".")>=0){var c=SC.tupleForPropertyPath(a,this);if(!c||!c[0])return null;c[0].set(c[1],b)}else this.set(a,b);return this},setPathIfChanged:function(a,b){if(a.indexOf(".")>=0){var c=SC.tupleForPropertyPath(a,this);if(!c||!c[0])return null;c[0].get(c[1])!==b&&c[0].set(c[1],b)}else this.setIfChanged(a,b);return this},getEach:function(){var a=SC.A(arguments),b=[],c,d;for(c=0,d=a.length;c<d;c++)b[b.length]=this.getPath(a[c]);return b},incrementProperty:function(a,b){b||(b=1),this.set(a,(this.get(a)||0)+b);return this.get(a)},decrementProperty:function(a,b){b||(b=1),this.set(a,(this.get(a)||0)-b);return this.get(a)},toggleProperty:function(a,b,c){b===undefined&&(b=!0),c===undefined&&(c=!1),b=this.get(a)==b?c:b,this.set(a,b);return this.get(a)},notifyPropertyChange:function(a,b){this.propertyWillChange(a),this.propertyDidChange(a,b);return this},allPropertiesDidChange:function(){this._kvo_cache=null,this._notifyPropertyObservers("*");return this},addProbe:function(a){this.addObserver(a,SC.logChange)},removeProbe:function(a){this.removeObserver(a,SC.logChange)},logProperty:function(){var a=SC.$A(arguments),b,c,d;for(d=0,c=a.length;d<c;d++)b=a[d],SC.Logger.log("%@:%@: ".fmt(SC.guidFor(this),b),this.get(b))},propertyRevision:1},SC.logChange=function(a,b,c){SC.Logger.log("CHANGE: %@[%@] => %@".fmt(a,b,a.get(b)))},SC.mixin(SC,{get:function(a,b){if(!a)return undefined;if(b===undefined)return this[a];if(a.get)return a.get(b);return a[b]},getPath:function(a,b){b===undefined&&(b=a,a=window);return SC.objectForPropertyPath(b,a)}}),SC.mixin(Array.prototype,SC.Observable),SC.Enumerator=function(a){this.enumerable=a,this.reset();return this},SC.Enumerator.prototype={nextObject:function(){var a=this._index,b=this._length;if(a>=b)return undefined;var c=this.enumerable.nextObject(a,this._previousObject,this._context);this._previousObject=c,this._index=a+1,a>=b&&(this._context=SC.Enumerator._pushContext(this._context));return c},reset:function(){var a=this.enumerable;if(!a)throw SC.$error("Enumerator has been destroyed");this._length=a.get?a.get("length"):a.length;var b=this._length;this._index=0,this._previousObject=null,this._context=b>0?SC.Enumerator._popContext():null},destroy:function(){this.enumerable=this._length=this._index=this._previousObject=this._context=null}},SC.Enumerator.create=function(a){return new SC.Enumerator(a)},SC.Enumerator._popContext=function(){var a=this._contextCache?this._contextCache.pop():null;return a||{}},SC.Enumerator._pushContext=function(a){this._contextCache=this._contextCache||[];var b=this._contextCache;b.push(a);return null},sc_require("core"),sc_require("ext/function"),sc_require("system/enumerator"),SC.Enumerable={isEnumerable:YES,nextObject:function(a,b,c){return this.objectAt?this.objectAt(a):this[a]},firstObject:function(){if(this.get("length")===0)return undefined;if(this.objectAt)return this.objectAt(0);var a=SC.Enumerator._popContext(),b;b=this.nextObject(0,null,a),a=SC.Enumerator._pushContext(a);return b}.property(),lastObject:function(){var a=this.get("length");if(a===0)return undefined;if(this.objectAt)return this.objectAt(a-1)}.property(),enumerator:function(){return SC.Enumerator.create(this)},forEach:function(a,b){if(typeof a!="function")throw new TypeError;var c=this.get?this.get("length"):this.length;b===undefined&&(b=null);var d=null,e=SC.Enumerator._popContext();for(var f=0;f<c;f++){var g=this.nextObject(f,d,e);a.call(b,g,f,this),d=g}d=null,e=SC.Enumerator._pushContext(e);return this},getEach:function(a){return this.map(function(b){return b?b.get?b.get(a):b[a]:null},this)},setEach:function(a,b){this.forEach(function(c){c&&(c.set?c.set(a,b):c[a]=b)},this);return this},map:function(a,b){if(typeof a!="function")throw new TypeError;var c=this.get?this.get("length"):this.length;b===undefined&&(b=null);var d=[],e=null,f=SC.Enumerator._popContext();for(var g=0;g<c;g++){var h=this.nextObject(g,e,f);d[g]=a.call(b,h,g,this),e=h}e=null,f=SC.Enumerator._pushContext(f);return d},mapProperty:function(a){return this.map(function(b){return b?b.get?b.get(a):b[a]:null})},filter:function(a,b){if(typeof a!="function")throw new TypeError;var c=this.get?this.get("length"):this.length;b===undefined&&(b=null);var d=[],e=null,f=SC.Enumerator._popContext();for(var g=0;g<c;g++){var h=this.nextObject(g,e,f);a.call(b,h,g,this)&&d.push(h),e=h}e=null,f=SC.Enumerator._pushContext(f);return d},sortProperty:function(a){var b=typeof a===SC.T_STRING?arguments:a,c=b.length,d;this instanceof Array?d=this:(d=[],this.forEach(function(a){d.push(a)}));if(!d)return[];return d.sort(function(a,d){var e,f,g,h,i=0;for(e=0;i===0&&e<c;e++)f=b[e],g=a?a.get?a.get(f):a[f]:null,h=d?d.get?d.get(f):d[f]:null,i=SC.compare(g,h);return i})},filterProperty:function(a,b){var c=this.get?this.get("length"):this.length,d=[],e=null,f=SC.Enumerator._popContext();for(var g=0;g<c;g++){var h=this.nextObject(g,e,f),i=h?h.get?h.get(a):h[a]:null,j=b===undefined?!!i:SC.isEqual(i,b);j&&d.push(h),e=h}e=null,f=SC.Enumerator._pushContext(f);return d},find:function(a,b){var c=this.get?this.get("length"):this.length;b===undefined&&(b=null);var d=null,e,f=NO,g=null,h=SC.Enumerator._popContext();for(var i=0;i<c&&!f;i++){e=this.nextObject(i,d,h);if(f=a.call(b,e,i,this))g=e;d=e}e=d=null,h=SC.Enumerator._pushContext(h);return g},findProperty:function(a,b){var c=this.get?this.get("length"):this.length,d=NO,e=null,f=null,g,h,i=SC.Enumerator._popContext();for(var j=0;j<c&&!d;j++)g=this.nextObject(j,f,i),h=g?g.get?g.get(a):g[a]:null,d=b===undefined?!!h:SC.isEqual(h,b),d&&(e=g),f=g;f=g=null,i=SC.Enumerator._pushContext(i);return e},every:function(a,b){if(typeof a!="function")throw new TypeError;var c=this.get?this.get("length"):this.length;b===undefined&&(b=null);var d=YES,e=null,f=SC.Enumerator._popContext();for(var g=0;d&&g<c;g++){var h=this.nextObject(g,e,f);a.call(b,h,g,this)||(d=NO),e=h}e=null,f=SC.Enumerator._pushContext(f);return d},everyProperty:function(a,b){var c=this.get?this.get("length"):this.length,d=YES,e=null,f=SC.Enumerator._popContext();for(var g=0;d&&g<c;g++){var h=this.nextObject(g,e,f),i=h?h.get?h.get(a):h[a]:null;d=b===undefined?!!i:SC.isEqual(i,b),e=h}e=null,f=SC.Enumerator._pushContext(f);return d},some:function(a,b){if(typeof a!="function")throw new TypeError;var c=this.get?this.get("length"):this.length;b===undefined&&(b=null);var d=NO,e=null,f=SC.Enumerator._popContext();for(var g=0;!d&&g<c;g++){var h=this.nextObject(g,e,f);a.call(b,h,g,this)&&(d=YES),e=h}e=null,f=SC.Enumerator._pushContext(f);return d},someProperty:function(a,b){var c=this.get?this.get("length"):this.length,d=NO,e=null,f=SC.Enumerator._popContext();for(var g=0;!d&&g<c;g++){var h=this.nextObject(g,e,f),i=h?h.get?h.get(a):h[a]:null;d=b===undefined?!!i:SC.isEqual(i,b),e=h}e=null,f=SC.Enumerator._pushContext(f);return d},reduce:function(a,b,c){if(typeof a!="function")throw new TypeError;var d=this.get?this.get("length"):this.length;if(d===0&&b===undefined)throw new TypeError;var e=b,f=null,g=SC.Enumerator._popContext();for(var h=0;h<d;h++){var i=this.nextObject(h,f,g);i!==null&&(e===undefined?e=i:e=a.call(null,e,i,h,this,c)),f=i}f=null,g=SC.Enumerator._pushContext(g);if(e===undefined)throw new TypeError;return e},invoke:function(a){var b=this.get?this.get("length"):this.length;if(b<=0)return[];var c,d=[],e=arguments.length;if(e>1)for(c=1;c<e;c++)d.push(arguments[c]);var f=[],g=null,h=SC.Enumerator._popContext();for(c=0;c<b;c++){var i=this.nextObject(c,g,h),j=i?i[a]:null;j&&(f[c]=j.apply(i,d)),g=i}g=null,h=SC.Enumerator._pushContext(h);return f},invokeWhile:function(a,b){var c=this.get?this.get("length"):this.length;if(c<=0)return null;var d,e=[],f=arguments.length;if(f>2)for(d=2;d<f;d++)e.push(arguments[d]);var g=a,h=null,i=SC.Enumerator._popContext();for(d=0;g===a&&d<c;d++){var j=this.nextObject(d,h,i),k=j?j[b]:null;k&&(g=k.apply(j,e)),h=j}h=null,i=SC.Enumerator._pushContext(i);return g},toArray:function(){var a=[];this.forEach(function(b){a.push(b)},this);return a},groupBy:function(a){var b=this.get?this.get("length"):this.length,c=[],d=null,e=SC.Enumerator._popContext(),f=[],g=[],h,i,j;for(h=0;h<b;h++)i=this.nextObject(h,d,e),j=i?i.get?i.get(a):i[a]:null,SC.none(f[j])&&(f[j]=[],g.push(j)),f[j].push(i),d=i;d=null,e=SC.Enumerator._pushContext(e);for(h=0,b=g.length;h<b;h++)c.push(f[g[h]]);return c}},SC._buildReducerFor=function(a,b){return function(c,d){var e=this[a];if(SC.typeOf(e)!==SC.T_FUNCTION)return this.unknownProperty?this.unknownProperty(c,d):null;var f=SC.Enumerable.reduce.call(this,e,null,b);return f}.property("[]")},SC.Reducers={"[]":function(a,b){return this}.property(),enumerableContentDidChange:function(a,b,c){this.notifyPropertyChange("[]")},reducedProperty:function(a,b,c){if(!a||typeof a!==SC.T_STRING||a.charAt(0)!=="@")return undefined;var d=a.match(/^@([^(]*)(\(([^)]*)\))?$/);if(!d||d.length<2)return undefined;var e=d[1],f=d[3];e="reduce"+e.slice(0,1).toUpperCase()+e.slice(1);var g=this[e];if(SC.typeOf(g)!==SC.T_FUNCTION)return undefined;if(c===NO)return SC.Enumerable.reduce.call(this,g,null,f);var h=SC._buildReducerFor(e,f),i=this.constructor.prototype;if(i){i[a]=h;var j=i._properties||[];j.push(a),i._properties=j,this.registerDependentKey(a,"[]")}return SC.Enumerable.reduce.call(this,g,null,f)},reduceMax:function(a,b,c,d,e){e&&b&&(b=b.get?b.get(e):b[e]);if(a===null)return b;return b>a?b:a},reduceMaxObject:function(a,b,c,d,e){var f=a,g=b;e&&(b&&(g=b.get?b.get(e):b[e]),a&&(f=a.get?a.get(e):a[e]));if(f===null)return b;return g>f?b:a},reduceMin:function(a,b,c,d,e){e&&b&&(b=b.get?b.get(e):b[e]);if(a===null)return b;return b<a?b:a},reduceMinObject:function(a,b,c,d,e){var f=a,g=b;e&&(b&&(g=b.get?b.get(e):b[e]),a&&(f=a.get?a.get(e):a[e]));if(f===null)return b;return g<f?b:a},reduceAverage:function(a,b,c,d,e){e&&b&&(b=b.get?b.get(e):b[e]);var f=(a||0)+b,g=d.get?d.get("length"):d.length;c>=g-1&&(f=f/g);return f},reduceSum:function(a,b,c,d,e){e&&b&&(b=b.get?b.get(e):b[e]);return a===null?b:a+b}},SC.mixin(SC.Enumerable,SC.Reducers),SC.mixin(Array.prototype,SC.Reducers),Array.prototype.isEnumerable=YES,function(){var a={nextObject:SC.Enumerable.nextObject,enumerator:SC.Enumerable.enumerator,firstObject:SC.Enumerable.firstObject,lastObject:SC.Enumerable.lastObject,sortProperty:SC.Enumerable.sortProperty,mapProperty:function(a){var b=this.length,c=[];for(var d=0;d<b;d++){var e=this[d];c[d]=e?e.get?e.get(a):e[a]:null}return c},filterProperty:function(a,b){var c=this.length,d=[];for(var e=0;e<c;e++){var f=this[e],g=f?f.get?f.get(a):f[a]:null,h=b===undefined?!!g:SC.isEqual(g,b);h&&d.push(f)}return d},groupBy:function(a){var b=this.length,c=[],d=[],e=[],f,g,h;for(f=0;f<b;f++)g=this[f],h=g?g.get?g.get(a):g[a]:null,SC.none(d[h])&&(d[h]=[],e.push(h)),d[h].push(g);for(f=0,b=e.length;f<b;f++)c.push(d[e[f]]);return c},find:function(a,b){if(typeof a!="function")throw new TypeError;var c=this.length;b===undefined&&(b=null);var d,e=null,f=NO;for(var g=0;g<c&&!f;g++){d=this[g];if(f=a.call(b,d,g,this))e=d}d=null;return e},findProperty:function(a,b){var c=this.length,d,e,f=NO,g=null;for(var h=0;h<c&&!f;h++)e=(d=this[h])?d.get?d.get(a):d[a]:null,f=b===undefined?!!e:SC.isEqual(e,b),f&&(g=d);d=null;return g},everyProperty:function(a,b){var c=this.length,d=YES;for(var e=0;d&&e<c;e++){var f=this[e],g=f?f.get?f.get(a):f[a]:null;d=b===undefined?!!g:SC.isEqual(g,b)}return d},someProperty
:function(a,b){var c=this.length,d=NO;for(var e=0;!d&&e<c;e++){var f=this[e],g=f?f.get?f.get(a):f[a]:null;d=b===undefined?!!g:SC.isEqual(g,b)}return d},invoke:function(a){var b=this.length;if(b<=0)return[];var c,d=[],e=arguments.length;if(e>1)for(c=1;c<e;c++)d.push(arguments[c]);var f=[];for(c=0;c<b;c++){var g=this[c],h=g?g[a]:null;h&&(f[c]=h.apply(g,d))}return f},invokeWhile:function(a,b){var c=this.length;if(c<=0)return null;var d,e=[],f=arguments.length;if(f>2)for(d=2;d<f;d++)e.push(arguments[d]);var g=a;for(d=0;g===a&&d<c;d++){var h=this[d],i=h?h[b]:null;i&&(g=i.apply(h,e))}return g},toArray:function(){var a=this.length;if(a<=0)return[];var b=[];for(var c=0;c<a;c++){var d=this[c];b.push(d)}return b},getEach:function(a){var b=[],c=this.length;for(var d=0;d<c;d++){var e=this[d];b[d]=e?e.get?e.get(a):e[a]:null}return b},setEach:function(a,b){var c=this.length;for(var d=0;d<c;d++){var e=this[d];e&&(e.set?e.set(a,b):e[a]=b)}return this}},b={forEach:function(a,b){if(typeof a!="function")throw new TypeError;b===undefined&&(b=null);for(var c=0,d=this.length;c<d;c++){var e=this[c];a.call(b,e,c,this)}return this},map:function(a,b){if(typeof a!="function")throw new TypeError;b===undefined&&(b=null);var c=[];for(var d=0,e=this.length;d<e;d++){var f=this[d];c[d]=a.call(b,f,d,this)}return c},filter:function(a,b){if(typeof a!="function")throw new TypeError;b===undefined&&(b=null);var c=[];for(var d=0,e=this.length;d<e;d++){var f=this[d];a.call(b,f,d,this)&&c.push(f)}return c},every:function(a,b){if(typeof a!="function")throw new TypeError;var c=this.length;b===undefined&&(b=null);var d=YES;for(var e=0;d&&e<c;e++){var f=this[e];a.call(b,f,e,this)||(d=NO)}return d},some:function(a,b){if(typeof a!="function")throw new TypeError;var c=this.length;b===undefined&&(b=null);var d=NO;for(var e=0;!d&&e<c;e++){var f=this[e];a.call(b,f,e,this)&&(d=YES)}return d},reduce:function(a,b,c){if(typeof a!="function")throw new TypeError;var d=this.length;if(d===0&&b===undefined)throw new TypeError;var e=b;for(var f=0;f<d;f++){var g=this[f];g!==null&&(e===undefined?e=g:e=a.call(null,e,g,f,this,c))}if(e===undefined)throw new TypeError;return e}};for(var c in b){if(!b.hasOwnProperty(c))continue;if(!Array.prototype[c]||typeof Prototype=="object"&&Prototype.Version.match(/^1\.6/))Array.prototype[c]=b[c]}SC.mixin(Array.prototype,a)}(),SC.RangeObserver={isRangeObserver:YES,toString:function(){var a=this.indexes?this.indexes.toString():"SC.IndexSet<..>";return a.replace("IndexSet","RangeObserver(%@)".fmt(SC.guidFor(this)))},create:function(a,b,c,d,e,f){var g=SC.beget(this);g.source=a,g.indexes=b?b.frozenCopy():null,g.target=c,g.method=d,g.context=e,g.isDeep=f||!1,g.beginObserving();return g},extend:function(a){var b=SC.beget(this),c=arguments;for(var d=0,e=c.length;d<e;d++)SC.mixin(b,c[d]);return b},destroy:function(a){this.endObserving();return this},update:function(a,b){if(this.indexes&&this.indexes.isEqual(b))return this;this.indexes=b?b.frozenCopy():null,this.endObserving().beginObserving();return this},beginObserving:function(){if(!this.isDeep)return this;var a=this.observing=this.observing||SC.CoreSet.create(),b=this._beginObservingForEach,c=this.source;b||(b=this._beginObservingForEach=function(b){var d=c.objectAt(b);d&&d.addObserver&&(a.push(d),d._kvo_needsRangeObserver=!0)}),this.indexes.forEach(b),this.isObserving=!1,SC.Observers.addPendingRangeObserver(this);return this},setupPending:function(a){var b=this.observing;if(this.isObserving||!b||b.get("length")===0)return!0;if(b.contains(a)){this.isObserving=!0;var c=this._setupPendingForEach;if(!c){var d=this.source,e=this.objectPropertyDidChange,f=this;c=this._setupPendingForEach=function(a){var c=d.objectAt(a),g=SC.guidFor(c),h;c&&c.addObserver&&(b.push(c),c.addObserver("*",f,e),h=f[g],h==null?f[g]=a:h.isIndexSet?h.add(a):f[g]=SC.IndexSet.create(h).add(a))}}this.indexes.forEach(c);return!0}return!1},endObserving:function(){if(!this.isDeep)return this;var a=this.observing;if(this.isObserving){var b=this.objectPropertyDidChange,c=this.source,d,e,f;if(a){e=a.length;for(d=0;d<e;d++)f=a[d],f.removeObserver("*",this,b),this[SC.guidFor(f)]=null;a.length=0}this.isObserving=!1}a&&a.clear();return this},rangeDidChange:function(a){var b=this.indexes;if(!a||!b||b.intersects(a))this.endObserving(),this.method.call(this.target,this.source,null,"[]",a,this.context),this.beginObserving();return this},objectPropertyDidChange:function(a,b,c,d){var e=this.context,f=this.method,g=SC.guidFor(a),h=this[g];h&&!h.isIndexSet&&(h=this[g]=SC.IndexSet.create(h).freeze()),f.call(this.target,this.source,a,b,h,e||d,d)}},sc_require("ext/function"),sc_require("mixins/observable"),sc_require("mixins/enumerable"),sc_require("system/range_observer"),SC.OUT_OF_RANGE_EXCEPTION="Index out of range",SC.CoreArray={isSCArray:YES,replace:function(a,b,c){throw"replace() must be implemented to support SC.Array"},indexOf:function(a,b){var c,d=this.get("length");b===undefined?b=0:b=b<0?Math.ceil(b):Math.floor(b),b<0&&(b+=d);for(c=b;c<d;c++)if(this.objectAt(c,YES)===a)return c;return-1},lastIndexOf:function(a,b){var c,d=this.get("length");b===undefined?b=d-1:b=b<0?Math.ceil(b):Math.floor(b),b<0&&(b+=d);for(c=b;c>=0;c--)if(this.objectAt(c)===a)return c;return-1},objectAt:function(a){if(a<0)return undefined;if(a>=this.get("length"))return undefined;return this.get(a)},"[]":function(a,b){b!==undefined&&this.replace(0,this.get("length"),b);return this}.property(),insertAt:function(a,b){if(a>this.get("length"))throw SC.OUT_OF_RANGE_EXCEPTION;this.replace(a,0,[b]);return this},removeAt:function(a,b){var c=0,d=[];if(typeof a===SC.T_NUMBER){if(a<0||a>=this.get("length"))throw SC.OUT_OF_RANGE_EXCEPTION;if(b===undefined){this.replace(a,1,d);return this}a=SC.IndexSet.create(a,b)}this.beginPropertyChanges(),a.forEachRange(function(a,b){a-=c,c+=b,this.replace(a,b,d)},this),this.endPropertyChanges();return this},removeObject:function(a){var b=this.get("length")||0;while(--b>=0){var c=this.objectAt(b);c==a&&this.removeAt(b)}return this},removeObjects:function(a){this.beginPropertyChanges(),a.forEach(function(a){this.removeObject(a)},this),this.endPropertyChanges();return this},slice:function(a,b){var c=[],d=this.get("length");SC.none(a)&&(a=0);if(SC.none(b)||b>d)b=d;while(a<b)c[c.length]=this.objectAt(a++);return c},pushObject:function(a){this.insertAt(this.get("length"),a);return a},pushObjects:function(a){this.beginPropertyChanges(),a.forEach(function(a){this.pushObject(a)},this),this.endPropertyChanges();return this},popObject:function(){var a=this.get("length");if(a===0)return null;var b=this.objectAt(a-1);this.removeAt(a-1);return b},shiftObject:function(){if(this.get("length")===0)return null;var a=this.objectAt(0);this.removeAt(0);return a},unshiftObject:function(a){this.insertAt(0,a);return a},unshiftObjects:function(a){this.beginPropertyChanges(),a.forEach(function(a){this.unshiftObject(a)},this),this.endPropertyChanges();return this},isEqual:function(a){if(!a)return!1;if(a==this)return!0;var b=a.get("length");if(b!=this.get("length"))return!1;while(--b>=0)if(!SC.isEqual(a.objectAt(b),this.objectAt(b)))return!1;return!0},compact:function(){return this.without(null)},without:function(a){if(this.indexOf(a)<0)return this;var b=[];this.forEach(function(c){c!==a&&(b[b.length]=c)});return b},uniq:function(){var a=[];this.forEach(function(b){a.indexOf(b)<0&&(a[a.length]=b)});return a},max:function(){return Math.max.apply(Math,this)},min:function(){return Math.min.apply(Math,this)},rangeObserverClass:SC.RangeObserver,contains:function(a){return this.indexOf(a)>=0},addRangeObserver:function(a,b,c,d){var e=this._array_rangeObservers;e||(e=this._array_rangeObservers=SC.CoreSet.create()),this._array_oldLength===undefined&&(this._array_oldLength=this.get("length"));var f=this.rangeObserverClass,g=NO,h=f.create(this,a,b,c,d,g);e.add(h),this._array_isNotifyingRangeObservers||(this._array_isNotifyingRangeObservers=YES,this.addObserver("[]",this,this._array_notifyRangeObservers));return h},updateRangeObserver:function(a,b){return a.update(this,b)},removeRangeObserver:function(a){var b=a.destroy(this),c=this._array_rangeObservers;c&&c.remove(a);return b},addArrayObservers:function(a){this._modifyObserverSet("add",a)},removeArrayObservers:function(a){this._modifyObserverSet("remove",a)},_modifyObserverSet:function(a,b){var c,d,e=b.target||this,f=b.willChange||"arrayWillChange",g=b.didChange||"arrayDidChange",h=b.context;typeof f=="string"&&(f=e[f]),typeof g=="string"&&(g=e[g]),c=this._kvo_for("_kvo_array_will_change",SC.ObserverSet),d=this._kvo_for("_kvo_array_did_change",SC.ObserverSet),c[a](e,f,h),d[a](e,g,h)},arrayContentWillChange:function(a,b,c){this._teardownContentObservers(a,b);var d,e,f,g,h,i,j=this._kvo_array_will_change;if(j){e=j.members,f=e.length;for(g=0;g<f;g++)d=e[g],h=d[0],i=d[1],i.call(h,a,b,c,this)}},arrayContentDidChange:function(a,b,c){var d=this._array_rangeObservers,e,f,g;this.beginPropertyChanges(),this.notifyPropertyChange("length"),d&&d.length>0&&(g=this._array_rangeChanges,g||(g=this._array_rangeChanges=SC.IndexSet.create()),b===c?f=b:(f=this.get("length")-a,b>c&&(f+=b-c)),g.add(a,f)),this._setupContentObservers(a,c);var h,i,j,k,l,m,n=this._kvo_array_did_change;if(n){i=n.members,j=i.length;for(k=0;k<j;k++)h=i[k],l=h[0],m=h[1],m.call(l,a,b,c,this)}this.notifyPropertyChange("[]"),this.endPropertyChanges();return this},_setupContentObservers:function(a,b){var c=this._kvo_for("_kvo_content_observed_keys",SC.CoreSet),d,e;if(c.get("length")>0){d=this.slice(a,a+b);var f=this;c.forEach(function(a){e=SC.keyFor("_kvo_content_observers",a),f._kvo_for(e).forEach(function(a){d.forEach(function(b){f._resumeChainObservingForItemWithChainObserver(b,a)})})})}},_teardownContentObservers:function(a,b){var c=this._kvo_for("_kvo_content_observed_keys",SC.CoreSet),d,e;c.get("length")>0&&(d=this.slice(a,a+b),c.forEach(function(a){e=SC.keyFor("_kvo_content_observers",a),d.forEach(function(a){a._kvo_for(e).forEach(function(a){a.destroyChain()})})}))},teardownEnumerablePropertyChains:function(a){var b=this._kvo_enumerable_property_chains;b&&b.forEach(function(b){var c,d=a.get("length"),e=SC.guidFor(b),f,g,h="_kvo_enumerable_property_clones";b.notifyPropertyDidChange();for(c=0;c<d;c++)g=a[c],f=g[h][e],f.deactivate(),delete g[h][e]},this);return this},setupEnumerablePropertyChains:function(a){var b=this._kvo_enumerable_property_chains;b&&b.forEach(function(b){var c,d=a.get("length");b.notifyPropertyDidChange(),d=a.get("length");for(c=0;c<d;c++)this._clonePropertyChainToItem(b,a[c])},this);return this},registerDependentKeyWithChain:function(a,b){var c="_kvo_enumerable_property_chains",d,e,f,g;d=this._kvo_for(c,SC.CoreSet),d.add(b),this.forEach(function(a){this._clonePropertyChainToItem(b,a)},this)},_clonePropertyChainToItem:function(a,b){var c=SC.clone(a),d="_kvo_enumerable_property_clones",e;c.object=b,e=b[d]=b[d]||{},e[SC.guidFor(a)]=c,c.activate(b)},removeDependentKeyWithChain:function(a,b){var c="_kvo_enumerable_property_chains",d="_kvo_enumerable_property_clones",e,f,g,h;this.forEach(function(c){c.removeDependentKeyWithChain(a,b),h=c[d],g=h[SC.guidFor(b)],g.deactivate(c)},this)},_resumeChainObservingForItemWithChainObserver:function(a,b){var c=SC.clone(b.next),d=c.property;c.object=a,a.addObserver(d,c,c.propertyDidChange),b.root.tails&&b.root.tails.pushObject(c.tail()),c.propertyDidChange(),a._kvo_for(SC.keyFor("_kvo_content_observers",d)).push(c)},_addContentObserver:function(a){var b=a.next.property;this._kvo_for("_kvo_content_observed_keys",SC.CoreSet).push(b);var c=SC.keyFor("_kvo_content_observers",b);this._kvo_for(c).push(a),this._setupContentObservers(0,a.object.get("length"))},_removeContentObserver:function(a){var b,c,d=this._kvo_content_observed_keys,e=a.next.property;d.contains(e)&&(c=SC.keyFor("_kvo_content_observers",e),b=this._kvo_for(c),b.removeObject(a),this._teardownContentObservers(0,a.object.get("length")),b.length===0&&this._kvo_for("_kvo_content_observed_keys").remove(e))},_array_notifyRangeObservers:function(){var a=this._array_rangeObservers,b=this._array_rangeChanges,c=a?a.length:0,d,e;if(c>0&&b&&b.length>0){for(d=0;d<c;d++)a[d].rangeDidChange(b);b.clear()}}},SC.Array=SC.mixin({},SC.Enumerable,SC.CoreArray),sc_require("mixins/array"),SC.supplement(Array.prototype,SC.CoreArray),SC.mixin(Array.prototype,{replace:function(a,b,c){if(this.isFrozen)throw SC.FROZEN_ERROR;var d,e=c?c.get?c.get("length"):c.length:0;this.arrayContentWillChange(a,b,e),e===0?this.splice(a,b):(d=[a,b].concat(c),this.splice.apply(this,d)),this.arrayContentDidChange(a,b,e),this.enumerableContentDidChange(a,b,e-b);return this},unknownProperty:function(a,b){var c=this.reducedProperty(a,b);b!==undefined&&c===undefined&&(c=this[a]=b);return c}}),Array.prototype.indexOf===SC.CoreArray.indexOf&&(Array.prototype.indexOf=function(a,b){var c,d=this.length;b===undefined?b=0:b=b<0?Math.ceil(b):Math.floor(b),b<0&&(b+=d);for(c=b;c<d;c++)if(this[c]===a)return c;return-1}),Array.prototype.lastIndexOf===SC.CoreArray.lastIndexOf&&(Array.prototype.lastIndexOf=function(a,b){var c,d=this.length;b===undefined?b=d-1:b=b<0?Math.ceil(b):Math.floor(b),b<0&&(b+=d);for(c=b;c>=0;c--)if(this[c]===a)return c;return-1}),Date.now||(Date.now=function(){return(new Date).getTime()}),SC.String={fmt:function(a,b){var c=0;return a.replace(/%@([0-9]+)?/g,function(a,d){d=d?parseInt(d,0)-1:c++,a=b[d];return(a===null?"(null)":a===undefined?"":a).toString()})},w:function(a){var b=[],c=a.split(" "),d=c.length,e,f=0;for(f=0;f<d;++f)e=c[f],e.length!==0&&b.push(e);return b}},sc_require("system/string"),SC.mixin(String.prototype,{fmt:function(){return SC.String.fmt(this,arguments)},w:function(){return SC.String.w(this)}}),SC.Comparable={isComparable:YES,compare:function(a,b){throw"%@.compare() is not implemented".fmt(this.toString())}},SC.Copyable={isCopyable:YES,copy:function(a){throw"%@.copy() is not implemented"},frozenCopy:function(){var a=this.get?this.get("isFrozen"):this.isFrozen;if(a===YES)return this;if(a===undefined)throw"%@ does not support freezing".fmt(this);return this.copy().freeze()}},SC.mixin(Array.prototype,SC.Copyable),Array.prototype.copy=function(a){var b=this.slice(),c;if(a){c=b.length;while(c--)b[c]=SC.copy(b[c],!0)}return b},SC.FROZEN_ERROR=new Error("Cannot modify a frozen object"),SC.Freezable={isFreezable:YES,isFrozen:NO,freeze:function(){this.set?this.set("isFrozen",YES):this.isFrozen=YES;return this}},SC.mixin(Array.prototype,SC.Freezable),sc_require("mixins/enumerable"),sc_require("mixins/observable"),sc_require("mixins/freezable"),sc_require("mixins/copyable"),SC.Set=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,{create:function(a){var b,c,d=SC.Set._pool,e=this.isObservable,f;if(!e&&a===undefined&&d.length>0)return d.pop();b=SC.beget(this),e&&b.initObservable();if(a&&a.isEnumerable&&a.get("length")>0){b.isObservable=NO;if(a.isSCArray){f=a.get("length");for(c=0;c<f;c++)b.add(a.objectAt(c))}else if(a.isSet){f=a.length;for(c=0;c<f;c++)b.add(a[c])}else a.forEach(function(a){b.add(a)},this);b.isObservable=e}return b},isSet:YES,length:0,firstObject:function(){return this.length>0?this[0]:undefined}.property(),clear:function(){if(this.isFrozen)throw SC.FROZEN_ERROR;this.length=0;return this},contains:function(a){if(a===null)return NO;var b=this[SC.hashFor(a)];return!SC.none(b)&&b<this.length&&this[b]===a},isEqual:function(a){if(!a||!a.isSet||a.get("length")!==this.get("length"))return NO;var b=this.get("length");while(--b>=0)if(!a.contains(this[b]))return NO;return YES},addSetObserver:function(a){this.setObservers||(this.setObservers=SC.CoreSet.create()),this.setObservers.add(a)},removeSetObserver:function(a){!this.setObservers||this.setObservers.remove(a)},add:function(a){if(this.isFrozen)throw SC.FROZEN_ERROR;if(SC.none(a))return this;var b,c=(b=a.hash)&&typeof b=="function"?b.call(a):SC.guidFor(a),d=this[c],e=this.length;if(d>=e||this[d]!==a)this[e]=a,this[c]=e,this.length=e+1,this.setObservers&&this.didAddItem(a);this.isObservable&&this.enumerableContentDidChange();return this},addEach:function(a){if(this.isFrozen)throw SC.FROZEN_ERROR;if(!a||!a.isEnumerable)throw"%@.addEach must pass enumerable".fmt(this);var b,c=this.isObservable;c&&this.beginPropertyChanges();if(a.isSCArray){b=a.get("length");while(--b>=0)this.add(a.objectAt(b))}else if(a.isSet){b=a.length;while(--b>=0)this.add(a[b])}else a.forEach(function(a){this.add(a)},this);c&&this.endPropertyChanges();return this},remove:function(a){if(this.isFrozen)throw SC.FROZEN_ERROR;if(a===null||a===undefined)return this;var b,c=a&&(b=a.hash)&&typeof b===SC.T_FUNCTION?b.call(a):SC.guidFor(a),d=this[c],e=this.length,f;if(d===null||d===undefined||d>=e||this[d]!==a)return this;delete this[c],d<e-1&&(f=this[d]=this[e-1],c=f&&(b=f.hash)&&typeof b===SC.T_FUNCTION?b.call(f):SC.guidFor(f),this[c]=d),this.length=e-1,this.isObservable&&this.enumerableContentDidChange(),this.setObservers&&this.didRemoveItem(a);return this},pop:function(){if(this.isFrozen)throw SC.FROZEN_ERROR;var a=this.length>0?this[this.length-1]:null;this.remove(a);return a},removeEach:function(a){if(this.isFrozen)throw SC.FROZEN_ERROR;if(!a||!a.isEnumerable)throw"%@.addEach must pass enumerable".fmt(this);var b,c=this.isObservable;c&&this.beginPropertyChanges();if(a.isSCArray){b=a.get("length");while(--b>=0)this.remove(a.objectAt(b))}else if(a.isSet){b=a.length;while(--b>=0)this.remove(a[b])}else a.forEach(function(a){this.remove(a)},this);c&&this.endPropertyChanges();return this},copy:function(){return this.constructor.create(this)},destroy:function(){this.isFrozen=NO,this.isObservable||SC.Set._pool.push(this.clear());return this},forEach:function(a,b){var c=this.length;b||(b=this);for(var d=0;d<c;d++)a.call(b,this[d],d,this);return this},toString:function(){var a=this.length,b,c=[];for(b=0;b<a;b++)c[b]=this[b];return"SC.Set<%@>".fmt(c.join(","))},didAddItem:function(a){var b=this.setObservers;if(!!b){var c=b.length,d;for(d=0;d<c;d++)b[d].didAddItem(this,a)}},didRemoveItem:function(a){var b=this.setObservers;if(!!b){var c=b.length,d;for(d=0;d<c;d++)b[d].didRemoveItem(this,a)}},_pool:[],isObservable:YES}),SC.Set.constructor=SC.Set,SC.Set.clone=SC.Set.copy,SC.Set.push=SC.Set.unshift=SC.Set.add,SC.Set.shift=SC.Set.pop,SC.Set.addObject=SC.Set.add,SC.Set.removeObject=SC.Set.remove,SC.Set._pool=[],SC.CoreSet=SC.beget(SC.Set),SC.CoreSet.isObservable=NO,SC.CoreSet.constructor=SC.CoreSet,sc_require("mixins/observable"),sc_require("system/set"),SC.Observers={queue:[],addObserver:function(a,b,c,d){var e;typeof a=="string"?e=SC.tupleForPropertyPath(a,d):e=a,e&&e[0].addObserver?e[0].addObserver(e[1],b,c):this.queue.push([a,b,c,d])},removeObserver:function(a,b,c,d){var e,f,g,h;g=SC.tupleForPropertyPath(a,d),g&&g[0].removeObserver(g[1],b,c),e=this.queue.length,f=this.queue;while(--e>=0)h=f[e],h[0]===a&&h[1]===b&&h[2]==c&&h[3]===d&&(f[e]=null)},addPendingRangeObserver:function(a){var b=this.rangeObservers;b||(b=this.rangeObservers=SC.CoreSet.create()),b.add(a);return this},_TMP_OUT:[],flush:function(a){var b=this.queue,c,d=b.length;if(b&&d>0){var e=this.queue=[];for(c=0;c<d;c++){var f=b[c];if(!f)continue;var g=SC.tupleForPropertyPath(f[0],f[3]);g&&g[0].addObserver?g[0].addObserver(g[1],f[1],f[2]):e.push(f)}}if(a._kvo_needsRangeObserver){var h=this.rangeObservers,i=h?h.get("length"):0,j=this._TMP_OUT,k;for(c=0;c<i;c++)k=h[c],k.setupPending(a)&&j.push(k);j.length>0&&h.removeEach(j),j.length=0,a._kvo_needsRangeObserver=!1}},isObservingSuspended:0,_pending:SC.CoreSet.create(),objectHasPendingChanges:function(a){this._pending.add(a)},suspendPropertyObserving:function(){this.isObservingSuspended++},resumePropertyObserving:function(){var a;if(--this.isObservingSuspended<=0){a=this._pending,this._pending=SC.CoreSet.create();var b,c=a.length;for(b=0;b<c;b++)a[b]._notifyPropertyObservers();a.clear(),a=null}}},sc_require("core"),sc_require("mixins/observable"),sc_require("private/observer_queue"),sc_require("mixins/array"),sc_require("system/set"),SC.BENCHMARK_OBJECTS=NO,SC._detect_base=function(a,b,c){return function(){var d=b[c],e;if(!d)throw new Error("No '"+c+"' method was found on the superclass");a.isEnhancement?e=Array.prototype.slice.call(arguments,1):e=arguments;return d.apply(this,e)}},SC._object_extend=function(a,b,c){if(!b)throw"SC.Object.extend expects a non-null value.  Did you forget to 'sc_require' something?  Or were you passing a Protocol to extend() as if it were a mixin?";a._kvo_cloned=null;var d,e,f,g,h=a.concatenatedProperties,i=SC.K,j,k;e=h?h.length:0;var l=e>0?{}:null;while(--e>=0)d=h[e],j=a[d],k=b[d],j?(j instanceof Array||(j=SC.$A(j)),l[d]=k?j.concat(k):k):(k instanceof Array||(k=SC.$A(k)),l[d]=k);var m=a._bindings,n=NO,o=a._observers,p=NO,q=a._properties,r=NO,s,t,u,v=a.outlets,w=NO;b.outlets&&(v=(v||SC.EMPTY_ARRAY).concat(b.outlets),w=YES);for(d in b){if(d==="_kvo_cloned")continue;if(!b.hasOwnProperty(d))continue;var x=(l.hasOwnProperty(d)?l[d]:null)||b[d];if(d.length>7&&d.slice(-7)==="Binding")n||(m=(m||SC.EMPTY_ARRAY).slice(),n=YES),m===null&&(m=(a._bindings||SC.EMPTY_ARRAY).slice()),m[m.length]=d;else if(x&&x instanceof Function){!x.superclass&&x!==(g=a[d])&&(x.superclass=g||i,x.base=c?SC._detect_base(x,c,d):g||i),x.propertyPaths&&(p||(o=(o||SC.EMPTY_ARRAY).slice(),p=YES),o[o.length]=d);if(s=x.localPropertyPaths){t=s.length;while(--t>=0)u=a._kvo_for(SC.keyFor("_kvo_local",s[t]),SC.CoreSet),u.add(d),a._kvo_for("_kvo_observed_keys",SC.CoreSet).add(s[t])}x.dependentKeys&&(r||(q=(q||SC.EMPTY_ARRAY).slice(),r=YES),q[q.length]=d),x.autoconfiguredOutlet&&(w||(v=(v||SC.EMPTY_ARRAY).slice(),w=YES),v[v.length]=d),x.isEnhancement&&(x=SC._enhance(a[d]||i,x))}a[d]=x}b.hasOwnProperty("toString")&&(d="toString",x=(l.hasOwnProperty(d)?l[d]:null)||b[d],!x.superclass&&x!==(g=a[d])&&(x.superclass=x.base=g||i),a[d]=x),a._bindings=m||[],a._observers=o||[],a._properties=q||[],a.outlets=v||[];return a},SC._enhance=function(a,b){return function(){var c=Array.prototype.slice.call(arguments,0),d=this;c.unshift(function(){return a.apply(d,arguments)});return b.apply(this,c)}},SC.Object=function(a){this.__sc_super__=SC.Object.prototype;return this._object_init(a)},SC.mixin(SC.Object,{mixin:function(a){var b=arguments.length,c;for(c=0;c<b;c++)SC.mixin(this,arguments[c]);return this},superclass:null,extend:function(a){var b=SC.BENCHMARK_OBJECTS;b&&SC.Benchmark.start("SC.Object.extend");var c,d=function(a){this.__sc_super__=d.prototype;return this._object_init(a)};for(c in this){if(!this.hasOwnProperty(c))continue;d[c]=this[c]}this.hasOwnProperty("toString")&&(d.toString=this.toString),d.superclass=this,d.__sc_super__=this.prototype,SC.generateGuid(d,"sc"),d.subclasses=SC.Set.create(),this.subclasses.add(d);var e=d.prototype=SC.beget(this.prototype),f,g=arguments.length;for(f=0;f<g;f++)SC._object_extend(e,arguments[f],d.__sc_super__);e.constructor=d,b&&SC.Benchmark.end("SC.Object.extend");return d},reopen:function(a){return SC._object_extend(this.prototype,a,this.__sc_super__)},create:function(){var a=this,b=new a(arguments);SC.ObjectDesigner&&SC.ObjectDesigner.didCreateObject(b,SC.$A(arguments));return b},isClass:YES,subclasses:SC.Set.create(),toString:function(){return SC._object_className(this)},subclassOf:function(a){if(this===a)return NO;var b=this;while(b=b.superclass)if(b===a)return YES;return NO},hasSubclass:function(a){return a&&a.subclassOf?a.subclassOf(this):NO},kindOf:function(a){return this===a||this.subclassOf(a)},design:function(){if(this.isDesign){SC.Logger.warn("SC.Object#design called twice for %@.".fmt(this));return this}var a=this.extend.apply(this,arguments);a.isDesign=YES,SC.ObjectDesigner&&SC.ObjectDesigner.didLoadDesign(a,this,SC.A(arguments));return a}}),SC.Object.prototype={_kvo_enabled:YES,_object_init:function(a){var b,c=a?a.length:0;for(b=0;b<c;b++)SC._object_extend(this,a[b],this.__sc_super__);SC.generateGuid(this,"sc"),this.init();var d=this.initMixin;c=d?d.length:0;for(b=0;b<c;b++)d[b].call(this);return this},mixin:function(){var a,b=arguments.length;for(a=0;a<b;a++)SC.mixin(this,arguments[a]);for(a=0;a<b;a++){var c=arguments[a].initMixin;c&&c.call(this)}return this},init:function(){this.initObservable();return this},isDestroyed:NO,destroy:function(){if(this.get("isDestroyed"))return this;this.set("isDestroyed",YES);var a,b=this.destroyMixin,c=b?b.length:0;for(a=0;a<c;a++)b[a].call(this);this.bindings.invoke("disconnect"),this.bindings=null;return this},isObject:!0,respondsTo:function(a){return this[a]instanceof Function},tryToPerform:function(a,b,c){return this.respondsTo(a)&&this[a](b,c)!==NO},superclass:function(a){var b=arguments.callee.caller;if(!b)throw"superclass cannot determine the caller method";return b.superclass?b.superclass.apply(this,arguments):null},instanceOf:function(a){return this.constructor===a},kindOf:function(a){return this.constructor.kindOf(a)},toString:function(){if(!this._object_toString){var a=SC._object_className(this.constructor),b="%@:%@".fmt(a,SC.guidFor(this));if(a)this._object_toString=b;else return b}return this._object_toString},awake:function(){var a=this.outlets,b,c,d;for(b=0,c=a.length;b<c;++b)d=a[b],this.get(d);this.bindings.invoke("sync")},invokeOnce:function(a){SC.RunLoop.currentRunLoop.invokeOnce(this,a);return this},invokeLast:function(a){SC.RunLoop.currentRunLoop.invokeLast(this,a);return this},concatenatedProperties:["concatenatedProperties","initMixin","destroyMixin"]},SC.Object.prototype.constructor=SC.Object,SC.mixin(SC.Object.prototype,SC.Observable),SC.instanceOf=function(a,b){return!!a&&a.constructor===b},SC.kindOf=function(a,b){a&&!a.isClass&&(a=a.constructor);return!!(a&&a.kindOf&&a.kindOf(b))},SC._object_className=function(a){if(SC.isReady===NO)return"";a._object_className||findClassNames();if(a._object_className)return a._object_className;var b=a;while(b&&!b._object_className)b=b.superclass;return b&&b._object_className?b._object_className:"Anonymous"},sc_require("system/object"),SC._PropertyChain=SC.Object.extend({object:null,property:null,target:null,toInvalidate:null,nextProperty:null,activate:function(a){var b=this.get("object"),c=this.get("property"),d;a||(a=this.get("target")),b&&b!==a&&this.deactivate(),this.set("object",a),a&&c!=="@each"&&a.registerDependentKeyWithChain(c,this),this.next&&(d=a?a.get(c):undefined,this.next.activate(d));return this},deactivate:function(){var a=this.get("object"),b=this.get("property");a&&a.removeDependentKeyWithChain(b,this),this.next&&this.next.deactivate();return this},notifyPropertyDidChange:function(){var a=this.get("target"),b=this.get("toInvalidate"),c,d;a.propertyDidChange(b),this.next&&(c=this.get("object"),d=c.get(this.get("property")),this.next.activate(d))},toString:function(){return"SC._PropertyChain(target: %@, property: %@)".fmt(this.get("target"),this.get("property"))}}),SC._PropertyChain.createChain=function(a,b,c){var d=a.split("."),e=d.length,f=1,g=SC._PropertyChain.create({property:d[0],target:b,toInvalidate:c,nextProperty:d[1]});g.set("length",e);var h=g;while(--e>=1)h=h.next=SC._PropertyChain.create({property:d[f],target:b,toInvalidate:c,nextProperty:d[++f]}),h.set("length",e);return g},sc_require("ext/function"),sc_require("system/object"),SC.LOG_BINDINGS=NO,SC.BENCHMARK_BINDING_NOTIFICATIONS=NO,SC.BENCHMARK_BINDING_SETUP=NO,SC.MULTIPLE_PLACEHOLDER="@@MULT@@",SC.NULL_PLACEHOLDER="@@NULL@@",SC.EMPTY_PLACEHOLDER="@@EMPTY@@",SC.Binding={beget:function(a){var b=SC.beget(this);b.parentBinding=this,a!==undefined&&(b=b.from(a));return b},builder:function(){var a=this,b=function(b){return a.beget().from(b)};b.beget=function(){return a.beget()};return b},from:function(a,b){if(!a)return this;var c=this===SC.Binding?this.beget():this;c._fromPropertyPath=a,c._fromRoot=b,c._fromTuple=null;return c},to:function(a,b){var c=this===SC.Binding?this.beget():this;c._toPropertyPath=a,c._toRoot=b,c._toTuple=null;return c},connect:function(){if(this.isConnected)return this;this.isConnected=YES,this._connectionPending=YES,this._syncOnConnect=YES,SC.Binding._connectQueue.add(this),SC.RunLoop.isRunLoopInProgress()||this._scheduleSync();return this},_connect:function(){if(!!this._connectionPending){this._connectionPending=NO;var a,b,c=SC.BENCHMARK_BINDING_SETUP;c&&SC.Benchmark.start("SC.Binding.connect()"),a=this._fromPropertyPath,b=this._fromRoot,typeof a=="string"&&(a.indexOf(".")===0?(a=a.slice(1),b||(b=this._toRoot)):a.indexOf("*")===0&&(a=[this._fromRoot||this._toRoot,a.slice(1)],b=null)),this._fromObserverData=[a,this,this.fromPropertyDidChange,b],SC.Observers.addObserver.apply(SC.Observers,this._fromObserverData),this._oneWay||(a=this._toPropertyPath,b=this._toRoot,this._toObserverData=[a,this,this.toPropertyDidChange,b],SC.Observers.addObserver.apply(SC.Observers,this._toObserverData)),c&&SC.Benchmark.end("SC.Binding.connect()"),this._syncOnConnect&&(this._syncOnConnect=NO,c&&SC.Benchmark.start("SC.Binding.connect().sync"),this.sync(),c&&SC.Benchmark.end("SC.Binding.connect().sync"))}},disconnect:function(){if(!this.isConnected)return this;this._connectionPending?this._connectionPending=NO:(SC.Observers.removeObserver.apply(SC.Observers,this._fromObserverData),this._oneWay||SC.Observers.removeObserver.apply(SC.Observers,this._toObserverData)),this.isConnected=NO;return this},fromPropertyDidChange:function(a,b){var c=a?a.get(b):null;if(c!==this._bindingValue||b==="[]")this._setBindingValue(a,b),this._changePending=YES,SC.Binding._changeQueue.add(this),this._scheduleSync()},toPropertyDidChange:function(a,b){if(!this._oneWay){var c=a.get(b);c!==this._transformedBindingValue&&(this._setBindingValue(a,b),this._changePending=YES,SC.Binding._changeQueue.add(this),this._scheduleSync())}},_scheduleSync:function(){if(!SC.RunLoop.isRunLoopInProgress()&&!this._syncScheduled){this._syncScheduled=YES;var a=this;setTimeout(function(){SC.run(),a._syncScheduled=NO},1)}},_setBindingValue:function(a,b){this._bindingSource=a,this._bindingKey=b},_computeBindingValue:function(){var a=this._bindingSource,b=this._bindingKey,c,d;this._bindingValue=c=a?a.getPath(b):null;var e=this._transforms;if(e){var f=e.length,g;for(d=0;d<f;d++)g=e[d],c=g(c,this)}this._noError&&SC.typeOf(c)===SC.T_ERROR&&(c=null),this._transformedBindingValue=c},_connectQueue:SC.CoreSet.create(),_alternateConnectQueue:SC.CoreSet.create(),_changeQueue:SC.CoreSet.create(),_alternateChangeQueue:SC.CoreSet.create(),_changePending:NO,flushPendingChanges:function(){if(this._isFlushing)return NO;this._isFlushing=YES,SC.Observers.suspendPropertyObserving();var a=NO,b=SC.LOG_BINDINGS,c,d;while((c=this._connectQueue).length>0){this._connectQueue=this._alternateConnectQueue,this._alternateConnectQueue=c;while(d=c.pop())d._connect()}while((c=this._changeQueue).length>0){b&&SC.Logger.log("Begin: Trigger changed bindings"),a=YES,this._changeQueue=this._alternateChangeQueue,this._alternateChangeQueue=c;while(d=c.pop())d.applyBindingValue();b&&SC.Logger.log("End: Trigger changed bindings")}this._isFlushing=NO,SC.Observers.resumePropertyObserving();return a},applyBindingValue:function(){this._changePending=NO,this._computeBindingTargets(),this._computeBindingValue();var a=this._bindingValue,b=this._transformedBindingValue,c=SC.BENCHMARK_BINDING_NOTIFICATIONS,d=SC.LOG_BINDINGS;!this._oneWay&&this._fromTarget&&(d&&SC.Logger.log("%@: %@ -> %@".fmt(this,a,b)),c&&SC.Benchmark.start(this.toString()+"->"),this._fromTarget.setPathIfChanged(this._fromPropertyKey,a),c&&SC.Benchmark.end(this.toString()+"->")),this._toTarget&&(d&&SC.Logger.log("%@: %@ <- %@".fmt(this,a,b)),c&&SC.Benchmark.start(this.toString()+"<-"),this._toTarget.setPathIfChanged(this._toPropertyKey,b),c&&SC.Benchmark.start(this.toString()+"<-"))},sync:function(){if(!this.isConnected)return this;if(this._connectionPending)this._syncOnConnect=YES;else{this._computeBindingTargets();var a=this._fromTarget,b=this._fromPropertyKey;if(!a||!b)return this;var c=a.getPath(b);if(c!==this._bindingValue||b==="[]")this._setBindingValue(a,b),this._changePending=YES,SC.Binding._changeQueue.add(this)}return this},_syncOnConnect:NO,_computeBindingTargets:function(){if(!this._fromTarget){var a,b,c;a=this._fromPropertyPath,b=this._fromRoot,typeof a=="string"&&(a.indexOf(".")===0?(a=a.slice(1),b||(b=this._toRoot)):a.indexOf("*")===0&&(a=[b||this._toRoot,a.slice(1)],b=null)),c=SC.tupleForPropertyPath(a,b),c&&(this._fromTarget=c[0],this._fromPropertyKey=c[1])}this._toTarget||(a=this._toPropertyPath,b=this._toRoot,c=SC.tupleForPropertyPath(a,b),c&&(this._toTarget=c[0],this._toPropertyKey=c[1]))},oneWay:function(a,b){b===undefined&&SC.typeOf(a)===SC.T_BOOL&&(b=a,a=null);var c=this.from(a);c===SC.Binding&&(c=c.beget()),c._oneWay=b===undefined?YES:b;return c},transform:function(a){var b=this===SC.Binding?this.beget():this,c=b._transforms;c&&c===b.parentBinding._transform&&(c=b._transforms=c.slice()),c||(c=b._transforms=[]),c.push(a);return b
},resetTransforms:function(){var a=this===SC.Binding?this.beget():this;a._transforms=null;return a},noError:function(a,b){b===undefined&&SC.typeOf(a)===SC.T_BOOL&&(b=a,a=null);var c=this.from(a);c===SC.Binding&&(c=c.beget()),c._noError=b===undefined?YES:b;return c},single:function(a,b){b===undefined&&(b=SC.MULTIPLE_PLACEHOLDER);return this.from(a).transform(function(a,c){if(a&&a.isEnumerable){var d=a.get("length");a=d>1?b:d<=0?null:a.firstObject()}return a})},notEmpty:function(a,b){b===undefined&&(b=SC.EMPTY_PLACEHOLDER);return this.from(a).transform(function(a,c){if(SC.none(a)||a===""||SC.isArray(a)&&a.length===0)a=b;return a})},notNull:function(a,b){b===undefined&&(b=SC.EMPTY_PLACEHOLDER);return this.from(a).transform(function(a,c){SC.none(a)&&(a=b);return a})},multiple:function(a){return this.from(a).transform(function(a){SC.isArray(a)||(a=a==null?[]:[a]);return a})},bool:function(a){return this.from(a).transform(function(a){var b=SC.typeOf(a);if(b===SC.T_ERROR)return a;return b==SC.T_ARRAY?a.length>0:a===""?NO:!!a})},and:function(a,b){var c=SC.Object.create({valueABinding:a,valueBBinding:b,and:function(){return this.get("valueA")&&this.get("valueB")}.property("valueA","valueB").cacheable()});return this.from("and",c).oneWay()},or:function(a,b){var c=SC.Object.create({valueABinding:a,valueBBinding:b,or:function(){return this.get("valueA")||this.get("valueB")}.property("valueA","valueB").cacheable()});return this.from("or",c).oneWay()},not:function(a){return this.from(a).transform(function(a){var b=SC.typeOf(a);if(b===SC.T_ERROR)return a;return!(b==SC.T_ARRAY?a.length>0:a===""?NO:!!a)})},isNull:function(a){return this.from(a).transform(function(a){var b=SC.typeOf(a);return b===SC.T_ERROR?a:SC.none(a)})},toString:function(){var a=this._fromRoot?"<%@>:%@".fmt(this._fromRoot,this._fromPropertyPath):this._fromPropertyPath,b=this._toRoot?"<%@>:%@".fmt(this._toRoot,this._toPropertyPath):this._toPropertyPath,c=this._oneWay?"[oneWay]":"";return"SC.Binding%@(%@ -> %@)%@".fmt(SC.guidFor(this),a,b,c)}},SC.binding=function(a,b){return SC.Binding.from(a,b)},sc_require("ext/function"),SC.Error=SC.Object.extend({code:-1,message:"",errorValue:null,errorObject:function(){return this}.property().cacheable(),label:null,toString:function(){return"SC.Error:%@:%@ (%@)".fmt(SC.guidFor(this),this.get("message"),this.get("code"))},isError:YES}),SC.Error.desc=function(a,b,c,d){var e={message:a};b!==undefined&&(e.label=b),d!==undefined&&(e.code=d),c!==undefined&&(e.errorValue=c);return this.create(e)},SC.$error=function(a,b,c,d){return SC.Error.desc(a,b,c,d)},SC.ok=function(a){return a!==!1&&(!a||!a.isError)},SC.$ok=SC.ok,SC.val=function(a){return a&&a.isError?a.get?a.get("errorValue"):null:a},SC.$val=SC.val,SC.Error.HAS_MULTIPLE_VALUES=-100,sc_require("mixins/enumerable"),sc_require("mixins/observable"),sc_require("mixins/freezable"),sc_require("mixins/copyable"),SC.IndexSet=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,SC.Copyable,{_sc_sliceContent:function(a){if(a.length<1e3)return a.slice();var b=0,c=[],d=a[0];while(d!==0)c[b]=d,b=d<0?0-d:d,d=a[b];c[b]=0,this._hint(0,b,c);return c},create:function(a,b){var c=SC.beget(this);c.initObservable(),c.registerDependentKey("min","[]"),a&&a.isIndexSet?(c._content=this._sc_sliceContent(a._content),c.max=a.max,c.length=a.length,c.source=a.source):(c._content=[0],a!==undefined&&c.add(a,b));return c},isIndexSet:YES,HINT_SIZE:256,length:0,max:0,min:function(){var a=this._content,b=a[0];return b===0?-1:b>0?0:Math.abs(b)}.property("[]").cacheable(),firstObject:function(){return this.get("length")>0?this.get("min"):undefined}.property(),rangeStartForIndex:function(a){var b=this._content,c=this.get("max"),d,e,f;if(a>=c)return c;if(Math.abs(b[a])>a)return a;f=a-a%SC.IndexSet.HINT_SIZE,d=b[f];if(d<0||d>a)d=f;e=Math.abs(b[d]);while(e<a)d=e,e=Math.abs(b[d]);return d},isEqual:function(a){if(a===this)return YES;if(!a||!a.isIndexSet||a.max!==this.max||a.length!==this.length)return NO;var b=this._content,c=a._content,d=0,e=b[d];do{if(c[d]!==e)return NO;d=Math.abs(e),e=b[d]}while(d!==0);return YES},indexBefore:function(a){if(a===0)return-1;a--;var b=this._content,c=this.get("max"),d=this.rangeStartForIndex(a);if(!b)return null;while(d===c||b[d]<0){if(d===0)return-1;a=d-1,d=this.rangeStartForIndex(a)}return a},indexAfter:function(a){var b=this._content,c=this.get("max"),d,e;if(!b||a>=c)return-1;a++,d=this.rangeStartForIndex(a),e=b[d];while(e<0){if(e===0)return-1;a=d=Math.abs(e),e=b[d]}return a},contains:function(a,b){var c,d,e,f,g;if(b===undefined){if(a===null||a===undefined)return NO;if(typeof a===SC.T_NUMBER)b=1;else{if(a&&a.isIndexSet){if(a===this)return YES;c=a._content,d=0,e=c[d];while(e!==0){if(e>0&&!this.contains(d,e-d))return NO;d=Math.abs(e),e=c[d]}return YES}b=a.length,a=a.start}}f=this.rangeStartForIndex(a),g=this._content[f];return g>0&&f<=a&&g>=a+b},intersects:function(a,b){var c,d,e,f;if(b===undefined)if(typeof a===SC.T_NUMBER)b=1;else{if(a&&a.isIndexSet){if(a===this)return YES;c=a._content,d=0,e=c[d];while(e!==0){if(e>0&&this.intersects(d,e-d))return YES;d=Math.abs(e),e=c[d]}return NO}b=a.length,a=a.start}d=this.rangeStartForIndex(a),c=this._content,e=c[d],f=a+b;while(d<f){if(e===0)return NO;if(e>0&&e>a)return YES;d=Math.abs(e),e=c[d]}return NO},without:function(a,b){if(a===this)return SC.IndexSet.create();return this.clone().remove(a,b)},replace:function(a,b){if(b===undefined)if(typeof a===SC.T_NUMBER)b=1;else{if(a&&a.isIndexSet){this._content=this._sc_sliceContent(a._content),this.beginPropertyChanges().set("max",a.max).set("length",a.length).set("source",a.source).enumerableContentDidChange().endPropertyChanges();return this}b=a.length,a=a.start}var c=this.length;this._content.length=1,this._content[0]=0,this.length=this.max=0;return this.add(a,b)},add:function(a,b){if(this.isFrozen)throw SC.FROZEN_ERROR;var c,d,e;if(a&&a.isIndexSet){c=a._content;if(!c)return this;d=0,e=c[0];while(e!==0)e>0&&this.add(d,e-d),d=e<0?0-e:e,e=c[d];return this}if(b===undefined){if(a===null||a===undefined)return this;typeof a===SC.T_NUMBER?b=1:(b=a.length,a=a.start)}else b===null&&(b=1);if(b<=0)return this;var f=this.get("max"),g=f,h,i;c=this._content;if(a===f)a>0?(d=this.rangeStartForIndex(a-1),e=c[d],e>0?(delete c[f],c[d]=f=a+b,a=d):c[f]=f=a+b):c[a]=f=b,c[f]=0,this.set("max",f),this.set("length",this.length+b),b=f-a;else if(a>f)c[f]=0-a,c[a]=a+b,c[a+b]=0,this.set("max",a+b),this.set("length",this.length+b),b=a+b-f,a=f;else{d=this.rangeStartForIndex(a),e=c[d],f=a+b,h=0,a>0&&d===a&&e<=0&&(d=this.rangeStartForIndex(a-1),e=c[d]),e<0?(c[d]=0-a,Math.abs(e)>f?(c[a]=0-f,c[f]=e):c[a]=e):(a=d,e>f&&(f=e)),d=a;while(d<f)i=c[d],i===0?(c[f]=0,e=f,h+=f-d):(e=Math.abs(i),e>f&&(c[f]=i,e=f),i<0&&(h+=e-d)),delete c[d],d=e;(d=c[f])>0&&(delete c[f],f=d),c[a]=f,f>g&&this.set("max",f),this.set("length",this.get("length")+h),b=f-a}this._hint(a,b),h!==0&&this.enumerableContentDidChange();return this},remove:function(a,b){if(this.isFrozen)throw SC.FROZEN_ERROR;if(b===undefined){if(a===null||a===undefined)return this;if(typeof a===SC.T_NUMBER)b=1;else{if(a.isIndexSet){a.forEachRange(this.remove,this);return this}b=a.length,a=a.start}}if(b<=0)return this;var c=this.get("max"),d=c,e=this._content,f,g,h,i,j;if(a>=c)return this;f=this.rangeStartForIndex(a),g=e[f],j=a+b,h=0,a>0&&f===a&&g>0&&(f=this.rangeStartForIndex(a-1),g=e[f]),g>0?(e[f]=a,g>j?(e[a]=j,e[j]=g):e[a]=g):(a=f,g=Math.abs(g),g>j&&(j=g)),f=a;while(f<j)i=e[f],i===0?(e[j]=0,g=j):(g=Math.abs(i),g>j&&(e[j]=i,g=j),i>0&&(h+=g-f)),delete e[f],f=g;(f=e[j])<0&&(delete e[j],j=Math.abs(f)),e[j]===0?(delete e[j],e[a]=0,this.set("max",a)):e[a]=0-j,this.set("length",this.get("length")-h),b=j-a,this._hint(a,b),h!==0&&this.enumerableContentDidChange();return this},_hint:function(a,b,c){c===undefined&&(c=this._content);var d=SC.IndexSet.HINT_SIZE,e=Math.abs(c[a]),f=a-a%d+d,g=a+b;while(f<g){while(e!==0&&e<=f)a=e,e=Math.abs(c[a]);e===0?delete c[f]:f!==a&&(c[f]=a),f+=d}},clear:function(){if(this.isFrozen)throw SC.FROZEN_ERROR;var a=this.length;this._content.length=1,this._content[0]=0,this.set("length",0).set("max",0),a>0&&this.enumerableContentDidChange()},addEach:function(a){if(this.isFrozen)throw SC.FROZEN_ERROR;this.beginPropertyChanges();var b=a.get("length");if(a.isSCArray)while(--b>=0)this.add(a.objectAt(b));else a.isEnumerable&&a.forEach(function(a){this.add(a)},this);this.endPropertyChanges();return this},removeEach:function(a){if(this.isFrozen)throw SC.FROZEN_ERROR;this.beginPropertyChanges();var b=a.get("length");if(a.isSCArray)while(--b>=0)this.remove(a.objectAt(b));else a.isEnumerable&&a.forEach(function(a){this.remove(a)},this);this.endPropertyChanges();return this},clone:function(){return SC.IndexSet.create(this)},inspect:function(){var a=this._content,b=a.length,c=0,d=[],e;for(c=0;c<b;c++)e=a[c],e!==undefined&&d.push("%@:%@".fmt(c,e));return"SC.IndexSet<%@>".fmt(d.join(" , "))},forEachRange:function(a,b){var c=this._content,d=0,e=c[d],f=this.source;b===undefined&&(b=null);while(e!==0)e>0&&a.call(b,d,e-d,this,f),d=Math.abs(e),e=c[d];return this},forEachIn:function(a,b,c,d){var e=this._content,f=0,g=0,h=a+b,i=this.source,j=e[f];d===undefined&&(d=null);while(j!==0){f<a&&(f=a);while(f<j&&f<h)c.call(d,f++,g++,this,i);f>=h?f=j=0:(f=Math.abs(j),j=e[f])}return this},lengthIn:function(a,b){var c=0;if(b===undefined){if(a===null||a===undefined)return 0;if(typeof a===SC.T_NUMBER)b=1;else{if(a.isIndexSet){a.forEachRange(function(a,b){c+=this.lengthIn(a,b)},this);return c}b=a.length,a=a.start}}if(this.get("length")===0)return 0;var d=this._content,e=0,f=d[e],g=a+b;while(e<g&&f!==0)f>0&&(c+=f>g?g-e:f-e),e=Math.abs(f),f=d[e];return c},source:null,indexOf:function(a,b){var c=this.source;if(!c)throw"%@.indexOf() requires source".fmt(this);var d=c.get("length"),e=this._content,f=e[0]<0?Math.abs(e[0]):0,g;while(f>=0&&f<d){g=c.indexOf(a,f);if(g<0)return-1;if(this.contains(g))return g;f=g+1}return-1},lastIndexOf:function(a,b){var c=this.source;if(!c)throw"%@.lastIndexOf() requires source".fmt(this);var d=c.get("length"),e=this.max-1,f;e>=d&&(e=d-1);while(e>=0){f=c.lastIndexOf(a,e);if(f<0)return-1;if(this.contains(f))return f;e=f+1}return-1},forEachObject:function(a,b){var c=this.source;if(!c)throw"%@.forEachObject() requires source".fmt(this);var d=this._content,e=0,f=0,g=d[e];b===undefined&&(b=null);while(g!==0){while(e<g)a.call(b,c.objectAt(e),e,c,this),e++;e=Math.abs(g),g=d[e]}return this},addObject:function(a,b){var c=this.source;if(!c)throw"%@.addObject() requires source".fmt(this);var d=c.get("length"),e=0,f;while(e>=0&&e<d){f=c.indexOf(a,e);if(!(f>=0))return this;this.add(f);if(b)return this;e=f++}return this},addObjects:function(a,b){a.forEach(function(a){this.addObject(a,b)},this);return this},removeObject:function(a,b){var c=this.source;if(!c)throw"%@.removeObject() requires source".fmt(this);var d=c.get("length"),e=0,f;while(e>=0&&e<d){f=c.indexOf(a,e);if(!(f>=0))return this;this.remove(f);if(b)return this;e=f+1}return this},removeObjects:function(a,b){a.forEach(function(a){this.removeObject(a,b)},this);return this},LOG_OBSERVING:NO,forEach:function(a,b){var c=this._content,d=0,e=0,f=this.source,g=c[d];b===undefined&&(b=null);while(g!==0){while(d<g)a.call(b,d++,e++,this,f);d=Math.abs(g),g=c[d]}return this},nextObject:function(a,b,c){var d=this._content,e=c.next,f=this.get("max");if(b===null)b=e=0;else{if(b>=f){delete c.next;return null}b++}if(b===e){do b=Math.abs(e),e=d[b];while(e<0);c.next=e}return b},toString:function(){var a=[];this.forEachRange(function(b,c){a.push(c===1?b:"%@..%@".fmt(b,b+c-1))},this);return"SC.IndexSet<%@>".fmt(a.join(","))},max:0}),SC.IndexSet.slice=SC.IndexSet.copy=SC.IndexSet.clone,SC.IndexSet.EMPTY=SC.IndexSet.create().freeze(),SC.json={encode:function(a){return JSON.stringify(a)},decode:function(a){return JSON.parse(a)}},this.JSON||(this.JSON={}),function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g;return e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g;return e}}function quote(a){escapable.lastIndex=0;return escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return a<10?"0"+a:a}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(b&&typeof b!="function"&&(typeof b!="object"||typeof b.length!="number"))throw new Error("JSON.stringify");return str("",{"":a})}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")})}(),sc_require("ext/function"),SC.LOGGER_LOG_DELIMITER=", ",SC.LOGGER_LOG_ERROR="ERROR: ",SC.LOGGER_LOG_INFO="INFO:  ",SC.LOGGER_LOG_WARN="WARN:  ",SC.LOGGER_LOG_DEBUG="DEBUG: ",SC.LOGGER_LOG_GROUP_HEADER="** %@",SC.LOGGER_LOG_GROUP_INDENTATION="    ",SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX="%@:  ",SC.LOGGER_LEVEL_DEBUG="debug",SC.LOGGER_LEVEL_INFO="info",SC.LOGGER_LEVEL_WARN="warn",SC.LOGGER_LEVEL_ERROR="error",SC.LOGGER_LEVEL_NONE="none",SC.Logger=SC.Object.create({logOutputLevel:null,logRecordingLevel:SC.LOGGER_LEVEL_NONE,recordedLogMessages:null,recordedLogMessagesMaximumLength:500,recordedLogMessagesPruningMinimumLength:100,debugEnabled:NO,exists:function(){return!SC.none(this.get("reporter"))}.property("reporter").cacheable(),fallBackOnAlert:NO,reporter:console,debug:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_DEBUG,YES,a,arguments)},debugWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_DEBUG,NO,null,arguments)},debugGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_DEBUG,a,arguments)},debugGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_DEBUG)},info:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_INFO,YES,a,arguments)},infoWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_INFO,NO,null,arguments)},infoGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_INFO,a,arguments)},infoGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_INFO)},warn:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_WARN,YES,a,arguments)},warnWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_WARN,NO,null,arguments)},warnGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_WARN,a,arguments)},warnGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_WARN)},error:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_ERROR,YES,a,arguments)},errorWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_ERROR,NO,null,arguments)},errorGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_ERROR,a,arguments)},errorGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_ERROR)},outputRecordedLogMessages:function(a){if(!!this.get("exists")){var b=this.get("reporter"),c=this.get("recordedLogMessages"),d=0,e=SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX,f,g,h,i,j,k,l,m,n,o,p,q,r;if(c)for(f=0,g=c.length;f<g;++f){h=c[f],i=h.type,a&&(j=e.fmt(h.timestamp.utcFormat())),k=h.message;if(k)l=h.originalArguments,this._outputMessage(i,j,d,k,l);else{o=h.indentation,n=h.title,p=o-d;if(b.group){if(Math.abs(p)>1)for(q=0,r=p-1;q<r;++q)p>0?b.group():b.groupEnd();p>0?(m=j?j:"",m+=n,b.group(m)):b.groupEnd()}else p>0&&this._outputGroup(i,j,o-1,n);d=o}}}},stringifyRecordedLogMessages:function(){var a="",b=this.get("recordedLogMessages"),c=0,d=SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX,e=this._LOG_FALLBACK_PREFIX_MAPPING,f=SC.LOGGER_LOG_GROUP_HEADER,g,h,i,j,k,l,m,n,o,p,q;if(b)for(g=0,h=b.length;g<h;++g)i=b[g],j=i.type,m=d.fmt(i.timestamp.utcFormat()),m+=e[j]||"",k=i.message,k?(l=i.originalArguments,n=m+this._indentation(c),n+=l?this._argumentsToString(l):k):(p=i.indentation,o=i.title,q=p-c,q>0&&(n=m+this._indentation(c)+f.fmt(o)),c=p),a+=n+"\n";return a},log:function(){var a=this.get("reporter"),b=NO;this.get("exists")&&(typeof a.log=="function"?(a.log.apply(a,arguments),b=YES):a.log&&(a.log(this._argumentsToArray(arguments)),b=YES)),!b&&this.get("fallBackOnAlert")&&(this.get("exists")&&typeof a.alert=="function"?(a.alert(arguments),b=YES):(alert(arguments),b=YES));return b},group:function(a){var b=this.get("reporter");this.get("exists")&&typeof b.group=="function"&&b.group(a)},groupEnd:function(){var a=this.get("reporter");this.get("exists")&&typeof a.groupEnd=="function"&&a.groupEnd()},dir:function(){var a=this.get("reporter");this.get("exists")&&typeof a.dir=="function"?a.dir.apply(a,arguments):this.log.apply(this,arguments)},dirxml:function(){var a=this.get("reporter");this.get("exists")&&typeof a.dirxml=="function"?a.dirxml.apply(a,arguments):this.log.apply(this,arguments)},profile:function(a){var b=this.get("reporter");if(this.get("exists")&&typeof b.profile=="function"){b.profile(a);return YES}return NO},profileEnd:function(a){var b=this.get("reporter");if(this.get("exists")&&typeof b.profileEnd=="function"){b.profileEnd(a);return YES}return NO},time:function(a){var b=this.get("reporter");if(this.get("exists")&&typeof b.time=="function"){b.time(a);return YES}return NO},timeEnd:function(a){var b=this.get("reporter");if(this.get("exists")&&typeof b.timeEnd=="function"){b.timeEnd(a);return YES}return NO},trace:function(){var a=this.get("reporter");if(this.get("exists")&&typeof a.trace=="function"){a.trace();return YES}return NO},init:function(){arguments.callee.base.apply(this,arguments),this.get("logOutputLevel")||(SC.buildMode==="debug"?this.set("logOutputLevel",SC.LOGGER_LEVEL_DEBUG):this.set("logOutputLevel",SC.LOGGER_LEVEL_INFO)),this.debugEnabledDidChange()},debugEnabledDidChange:function(){this.get("debugEnabled")&&this.set("logOutputLevel",SC.LOGGER_LEVEL_DEBUG)}.observes("debugEnabled"),_handleMessage:function(a,b,c,d){var e=this._shouldOutputType(a),f=this._shouldRecordType(a),g,h,i,j,k,l;if(!!e||!!f){g=d&&d.length>1,b&&(SC.none(c)||typeof c!="string")&&(b=NO);if(b&&g){j=[];for(h=1,i=d.length;h<i;++h)j.push(d[h]);c=c.fmt.apply(c,j)}e&&(j=b?null:d,this._outputMessage(a,null,this._outputIndentationLevel,c,j)),f&&(l={type:a,message:c?c:YES,timestamp:new Date},!b&&g&&(l.originalArguments=d),this._addRecordedMessageEntry(l))}},_handleGroup:function(a,b,c){var d=this._shouldOutputType(a),e=this._shouldRecordType(a),f,g,h,i,j,k,l,m,n,o,p;if(!!d||!!e){f=c&&c.length>1;if(b&&f){i=[];for(g=1,h=c.length;g<h;++g)i.push(c[g]);b=b.fmt.apply(b,i)}d&&(this._outputGroup(a,null,this._outputIndentationLevel,b),this._outputIndentationLevel++),e&&(o=++this._recordingIndentationLevel,p={type:a,indentation:o,beginGroup:YES,title:b,timestamp:new Date},this._addRecordedMessageEntry(p))}},_handleGroupEnd:function(a){var b=this._shouldOutputType(a),c=this._shouldRecordType(a),d,e,f,g;if(!!b||!!c)b&&(this._outputIndentationLevel--,this.get("exists")&&(d=this.get("reporter"),e=d.groupEnd,e&&e.call(d))),c&&(f=--this._recordingIndentationLevel,g={type:a,indentation:f,timestamp:new Date},this._addRecordedMessageEntry(g))},_shouldOutputType:function(a){var b=this._LOG_LEVEL_MAPPING,c=b[a]||0,d=b[this.get("logOutputLevel")]||0;return c<=d},_shouldRecordType:function(a){var b=this._LOG_LEVEL_MAPPING,c=b[a]||0,d=b[this.get("logRecordingLevel")]||0;return c<=d},_outputMessage:function(a,b,c,d,e){if(!!this.get("exists")){var f=this.get("reporter"),g,h,i,j,k,l;h=!f.group,i=f[a],i?e?(k=this._argumentsToArray(e),j="",b&&(j=b),h&&(j+=this._indentation(c)),j&&k.splice(0,0,j),i.apply?i.apply(f,k):f[a](k)):(g="",b&&(g=b),h&&(g=+this._indentation(c)),g+=d,f[a](g)):f.log&&(j="",b&&(j=b),j+=this._LOG_FALLBACK_PREFIX_MAPPING[a]||"",h&&(j+=this._indentation(c)),e?(k=this._argumentsToArray(e),j&&k.splice(0,0,j),f.log(k)):f.log(j+d))}},_outputGroup:function(a,b,c,d){if(!!this.get("exists")){var e=this.get("reporter"),f=e.group,g;f?(g=b?b:"",g+=d,f.call(e,g)):e.log&&(g="",b&&(g=b),g+=this._LOG_FALLBACK_PREFIX_MAPPING[a]||"",g+=this._indentation(c),g+=SC.LOGGER_LOG_GROUP_HEADER.fmt(d),e.log(g))}},_addRecordedMessageEntry:function(a){var b=this.get("recordedLogMessages"),c;b||(b=[],this.set("recordedLogMessages",b)),b.push(a),c=b.length,c>this.get("recordedLogMessagesMaximumLength")&&b.splice(0,c-this.get("recordedLogMessagesPruningMinimumLength")),b.enumerableContentDidChange()},_argumentsToArray:function(a){var b=[],c,d;if(a)for(c=0,d=a.length;c<d;++c)b[c]=a[c];return b},_argumentsToString:function(){var a="",b=SC.LOGGER_LOG_DELIMITER,c,d;for(c=0,d=arguments.length-1;c<d;++c)a+=arguments[c]+b;a+=arguments[d];return a},_indentation:function(a){if(!a||a<0)a=0;var b="",c=SC.LOGGER_LOG_GROUP_INDENTATION,d;for(d=0;d<a;++d)b+=c;return b},_outputIndentationLevel:0,_recordingIndentationLevel:0,_LOG_LEVEL_MAPPING:{debug:4,info:3,warn:2,error:1,none:0},_LOG_FALLBACK_PREFIX_MAPPING:{debug:SC.LOGGER_LOG_DEBUG,info:SC.LOGGER_LOG_INFO,warn:SC.LOGGER_LOG_WARN,error:SC.LOGGER_LOG_ERROR}}),SC.debug=SC.Logger.debug,SC.info=SC.Logger.info,SC.warn=SC.Logger.warn,SC.error=SC.Logger.error,sc_require("ext/function"),sc_require("private/observer_set"),SC.RunLoop=SC.Object.extend({beginRunLoop:function(){this._start=(new Date).getTime(),(SC.LOG_BINDINGS||SC.LOG_OBSERVERS)&&SC.Logger.log("-- SC.RunLoop.beginRunLoop at %@".fmt(this._start)),this._runLoopInProgress=YES;return this},isRunLoopInProgress:function(){return this._runLoopInProgress}.property(),endRunLoop:function(){(SC.LOG_BINDINGS||SC.LOG_OBSERVERS)&&SC.Logger.log("-- SC.RunLoop.endRunLoop ~ flushing application queues"),this.flushAllPending(),this._start=null,(SC.LOG_BINDINGS||SC.LOG_OBSERVERS)&&SC.Logger.log("-- SC.RunLoop.endRunLoop ~ End"),SC.RunLoop.lastRunLoopEnd=Date.now(),this._runLoopInProgress=NO;return this},flushAllPending:function(){var a;do a=this.flushApplicationQueues(),a||(a=this._flushinvokeLastQueue());while(a)},invokeOnce:function(a,b){b===undefined&&(b=a,a=this),typeof b=="string"&&(b=a[b]),this._invokeQueue||(this._invokeQueue=SC.ObserverSet.create()),b&&this._invokeQueue.add(a,b);return this},invokeLast:function(a,b){b===undefined&&(b=a,a=this),typeof b=="string"&&(b=a[b]),this._invokeLastQueue||(this._invokeLastQueue=SC.ObserverSet.create()),this._invokeLastQueue.add(a,b);return this},flushApplicationQueues:function(){var a=NO,b=this._invokeQueue;b&&b.getMembers().length&&(this._invokeQueue=null,a=YES,b.invokeMethods());return SC.Binding.flushPendingChanges()||a},_flushinvokeLastQueue:function(){var a=this._invokeLastQueue,b=NO;a&&a.getMembers().length&&(this._invokeLastQueue=null,b=YES,b&&a.invokeMethods());return b}}),SC.RunLoop.currentRunLoop=null,SC.RunLoop.runLoopClass=SC.RunLoop,SC.RunLoop.begin=function(){var a=this.currentRunLoop;a||(a=this.currentRunLoop=this.runLoopClass.create()),a.beginRunLoop();return this},SC.RunLoop.end=function(){var a=this.currentRunLoop;if(!a)throw"SC.RunLoop.end() called outside of a runloop!";a.endRunLoop();return this},SC.RunLoop.isRunLoopInProgress=function(){if(this.currentRunLoop)return this.currentRunLoop.get("isRunLoopInProgress");return NO},SC.run=function(a,b,c){var d=SC.RunLoop.isRunLoopInProgress();if(SC.ExceptionHandler&&SC.ExceptionHandler.enabled)try{(c||!d)&&SC.RunLoop.begin(),a&&a.call(b),(c||!d)&&SC.RunLoop.end()}catch(e){SC.ExceptionHandler.handleException(e);if(!SC.browser.msie)throw e}else(c||!d)&&SC.RunLoop.begin(),a&&a.call(b),(c||!d)&&SC.RunLoop.end()};var handlebars=function(){var a={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,hashSegments:29,hashSegment:30,ID:31,EQUALS:32,pathSegments:33,SEP:34,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",31:"ID",32:"EQUALS",34:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[26,1],[29,2],[29,1],[30,3],[30,3],[21,1],[33,3],[33,1]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=new d.ProgramNode(f[h-2],f[h]);break;case 3:this.$=new d.ProgramNode(f[h]);break;case 4:this.$=new d.ProgramNode([]);break;case 5:this.$=[f[h]];break;case 6:f[h-1].push(f[h]),this.$=f[h-1];break;case 7:this.$=new d.InverseNode(f[h-2],f[h-1],f[h]);break;case 8:this.$=new d.BlockNode(f[h-2],f[h-1],f[h]);break;case 9:this.$=f[h];break;case 10:this.$=f[h];break;case 11:this.$=new d.ContentNode(f[h]);break;case 12:this.$=new d.CommentNode(f[h]);break;case 13:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 14:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 15:this.$=f[h-1];break;case 16:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 17:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1],!0);break;case 18:this.$=new d.PartialNode(f[h-1]);break;case 19:this.$=new d.PartialNode(f[h-2],f[h-1]);break;case 20:break;case 21:this.$=[[f[h-2]].concat(f[h-1]),f[h]];break;case 22:this.$=[[f[h-1]].concat(f[h]),null];break;case 23:this.$=[[f[h-1]],f[h]];break;case 24:this.$=[[f[h]],null];break;case 25:f[h-1].push(f[h]),this.$=f[h-1];break;case 26:this.$=[f[h]];break;case 27:this.$=f[h];break;case 28:this.$=new d.StringNode(f[h]);break;case 29:this.$=new d.HashNode(f[h]);break;case 30:f[h-1].push(f[h]),this.$=f[h-1];break;case 31:this.$=[f[h]];break;case 32:this.$=[f[h-2],f[h]];break;case 33:this.$=[f[h-2],new d.StringNode(f[h])];break;case 34:this.$=new d.IdNode(f[h]);break;case 35:f[h-2].push(f[h]),this.$=f[h-2];break;case 36:this.$=[f[h]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,31:[1,25],33:24},{17:26,21:23,31:[1,25],33:24},{17:27,21:23,31:[1,25],33:24},{17:28,21:23,31:[1,25],33:24},{21:29,31:[1,25],33:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,31:[1,25],33:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:39,30:42,31:[1,43],33:24},{18:[2,34],28:[2,34],31:[2,34],34:[1,44]},{18:[2,36],28:[2,36],31:[2,36],34:[2,36]},{18:[1,45]},{18:[1,46]},{18:[1,47]},{18:[1,48],21:49,31:[1,25],33:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:50,31:[1,25],33:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:51,27:52,28:[1,41],29:39,30:42,31:[1,43],33:24},{18:[2,23]},{18:[2,26],28:[2,26],31:[2,26]},{18:[2,29],30:53,31:[1,54]},{18:[2,27],28:[2,27],31:[2,27]},{18:[2,28],28:[2,28],31:[2,28]},{18:[2,31],31:[2,31]},{18:[2,36],28:[2,36],31:[2,36],32:[1,55],34:[2,36]},{31:[1,56]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,57]},{18:[1,58]},{18:[2,21]},{18:[2,25],28:[2,25],31:[2,25]},{18:[2,30],31:[2,30]},{32:[1,55]},{21:59,28:[1,60],31:[1,25],33:24},{18:[2,35],28:[2,35],31:[2,35],34:[2,35]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,32],31:[2,32]},{18:[2,33],31:[2,33]}],defaultActions:{16:[2,1],37:[2,23],51:[2,21]},parseError:function(a,b){throw new Error(a)},parse:function(a){function o(){var a;a=b.lexer.lex()||1,typeof a!="number"&&(a=b.symbols_[a]||a);return a}function n(a){c.length=c.length-2*a,d.length=d.length-a,e.length=e.length-a}var b=this,c=[0],d=[null],e=[],f=this.table,g="",h=0,i=0,j=0,k=2,l=1;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer;var m=this.lexer.yylloc;e.push(m),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var p,q,r,s,t,u,v={},w,x,y,z;for(;;){r=c[c.length-1],this.defaultActions[r]?s=this.defaultActions[r]:(p==null&&(p=o()),s=f[r]&&f[r][p]);if(typeof s=="undefined"||!s.length||!s[0]){if(!j){z=[];for(w in f[r])this.terminals_[w]&&w>2&&z.push("'"+this.terminals_[w]+"'");var A="";this.lexer.showPosition?A="Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+z.join(", "):A="Parse error on line "+(h+1)+": Unexpected "+(p==1?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(A,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:m,expected:z})}if(j==3){if(p==l)throw new Error(A||"Parsing halted.");i=this.lexer.yyleng,g=this.lexer.yytext,h=this.lexer.yylineno,m=this.lexer.yylloc,p=o()}for(;;){if(k.toString()in f[r])break;if(r==0)throw new Error(A||"Parsing halted.");n(1),r=c[c.length-1]}q=p,p=k,r=c[c.length-1],s=f[r]&&f[r][k],j=3}if(s[0]instanceof Array&&s.length>1)throw new Error("Parse Error: multiple actions possible at state: "+r+", token: "+p);switch(s[0]){case 1:c.push(p),d.push(this.lexer.yytext),e.push(this.lexer.yylloc),c.push(s[1]),p=null,q?(p=q,q=null):(i=this.lexer.yyleng,g=this.lexer.yytext,h=this.lexer.yylineno,m=this.lexer.yylloc,j>0&&j--);break;case 2:x=this.productions_[s[1]][1],v.$=d[d.length-x],v._$={first_line:e[e.length-(x||1)].first_line,last_line:e[e.length-1].last_line,first_column
:e[e.length-(x||1)].first_column,last_column:e[e.length-1].last_column},u=this.performAction.call(v,g,i,h,this.yy,s[1],d,e);if(typeof u!="undefined")return u;x&&(c=c.slice(0,-1*x*2),d=d.slice(0,-1*x),e=e.slice(0,-1*x)),c.push(this.productions_[s[1]][0]),d.push(v.$),e.push(v._$),y=f[c[c.length-2]][c[c.length-1]],c.push(y);break;case 3:return!0}}return!0}},f=function(){var a={EOF:1,parseError:function(a,b){if(this.yy.parseError)this.yy.parseError(a,b);else throw new Error(a)},setInput:function(a){this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.match+=a,this.matched+=a;var b=a.match(/\n/);b&&this.yylineno++,this._input=this._input.slice(1);return a},unput:function(a){this._input=a+this._input;return this},more:function(){this._more=!0;return this},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;a.length<20&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d;this._more||(this.yytext="",this.match="");var e=this._currentRules();for(var f=0;f<e.length;f++){b=this._input.match(this.rules[e[f]]);if(b){d=b[0].match(/\n.*/g),d&&(this.yylineno+=d.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-1:this.yylloc.last_column+b.length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,e[f],this.conditionStack[this.conditionStack.length-1]);if(a)return a;return}}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return typeof a!="undefined"?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}};a.performAction=function(a,b,c,d){var e=d;switch(c){case 0:this.begin("mu");if(b.yytext)return 14;break;case 1:return 14;case 2:return 24;case 3:return 16;case 4:return 20;case 5:return 19;case 6:return 19;case 7:return 23;case 8:return 23;case 9:b.yytext=b.yytext.substr(3,b.yyleng-5),this.begin("INITIAL");return 15;case 10:return 22;case 11:return 32;case 12:return 31;case 13:return 31;case 14:return 34;case 15:break;case 16:this.begin("INITIAL");return 18;case 17:this.begin("INITIAL");return 18;case 18:b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"');return 28;case 19:return 31;case 20:return"INVALID";case 21:return 5}},a.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{!.*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^[a-zA-Z0-9_]+(?=[=} /.])/,/^./,/^$/],a.conditions={mu:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],inclusive:!1},INITIAL:{rules:[0,1,21],inclusive:!0}};return a}();a.lexer=f;return a}(),Handlebars={};Handlebars.Parser=handlebars,Handlebars.parse=function(a){Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(a)},Handlebars.print=function(a){return(new Handlebars.PrintVisitor).accept(a)},Handlebars.Runtime={},Handlebars.Runtime.compile=function(a){var b=Handlebars.parse(a);return function(a,c,d){c=c||Handlebars.helpers,d=d||Handlebars.partials;var e=new Handlebars.Context(a,c,d),f=new Handlebars.Runtime(e);f.accept(b);return f.buffer}},Handlebars.helpers={},Handlebars.partials={},Handlebars.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},Handlebars.registerPartial=function(a,b){this.partials[a]=b},Handlebars.registerHelper("helperMissing",function(a){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+a+"'")}),Handlebars.registerHelper("blockHelperMissing",function(a,b,c){c=c||function(){};var d="",e=Object.prototype.toString.call(a);e==="[object Function]"&&(a=a());if(a===!0)return b(this);if(a===!1||a==null)return c(this);if(e==="[object Array]"){if(a.length>0)for(var f=0,g=a.length;f<g;f++)d=d+b(a[f]);else d=c(this);return d}return b(a)},function(a,b){return b(a)}),Handlebars.registerHelper("each",function(a,b,c){var d="";if(a&&a.length>0)for(var e=0,f=a.length;e<f;e++)d=d+b(a[e]);else d=c(this);return d}),Handlebars.registerHelper("if",function(a,b,c){return!a||a==[]?c(this):b(this)}),Handlebars.registerHelper("unless",function(a,b,c){return Handlebars.helpers["if"].call(this,a,c,b)}),Handlebars.registerHelper("with",function(a,b){return b(a)}),Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){}},Handlebars.log=function(a,b){Handlebars.logger.log(a,b)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(a,b){this.type="program",this.statements=a,b&&(this.inverse=new Handlebars.AST.ProgramNode(b))},Handlebars.AST.MustacheNode=function(a,b,c){this.type="mustache",this.id=a[0],this.params=a.slice(1),this.hash=b,this.escaped=!c},Handlebars.AST.PartialNode=function(a,b){this.type="partial",this.id=a,this.context=b};var a=function(a,b){if(a.original!==b.original)throw new Handlebars.Exception(a.original+" doesn't match "+b.original)};Handlebars.AST.BlockNode=function(b,c,d){a(b.id,d),this.type="block",this.mustache=b,this.program=c},Handlebars.AST.InverseNode=function(b,c,d){a(b.id,d),this.type="inverse",this.mustache=b,this.program=c},Handlebars.AST.ContentNode=function(a){this.type="content",this.string=a},Handlebars.AST.HashNode=function(a){this.type="hash",this.pairs=a},Handlebars.AST.IdNode=function(a){this.type="ID",this.original=a.join(".");var b=[],c=0;for(var d=0,e=a.length;d<e;d++){var f=a[d];if(f==="..")c++;else{if(f==="."||f==="this")continue;b.push(f)}}this.parts=b,this.string=b.join("."),this.depth=c,this.isSimple=b.length===1&&c===0},Handlebars.AST.StringNode=function(a){this.type="STRING",this.string=a},Handlebars.AST.CommentNode=function(a){this.type="comment",this.comment=a}}(),Handlebars.Visitor=function(){},Handlebars.Visitor.prototype={accept:function(a){return this[a.type](a)}},Handlebars.Exception=function(a){this.message=a},Handlebars.SafeString=function(a){this.string=a},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"<":"&lt;",">":"&gt;"},b=/&(?!\w+;)|[<>]/g,c=/[&<>]/,d=function(b){return a[b]||"&amp;"};Handlebars.Utils={escapeExpression:function(a){if(a instanceof Handlebars.SafeString)return a.toString();if(a==null||a===!1)return"";if(!c.test(a))return a;return a.replace(b,d)},isEmpty:function(a){return typeof a=="undefined"?!0:a===null?!0:a===!1?!0:Object.prototype.toString.call(a)==="[object Array]"&&a.length===0?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(a,b){a.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,invokeInverse:14,assignToHash:15,pushStringParam:16},a.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:1,lookup:1,invokeMustache:2,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:2,invokePartial:1,push:1,invokeInverse:1,assignToHash:1,pushStringParam:1},a.DISASSEMBLE_MAP={};for(var c in a.OPCODE_MAP){var d=a.OPCODE_MAP[c];a.DISASSEMBLE_MAP[d]=c}a.multiParamSize=function(b){return a.MULTI_PARAM_OPCODES[a.DISASSEMBLE_MAP[b]]},a.prototype={compiler:a,disassemble:function(){var b=this.opcodes,c,d,e=[],f,g,h;for(var i=0,j=b.length;i<j;i++){c=b[i];if(c==="DECLARE")g=b[++i],h=b[++i],e.push("DECLARE "+g+" = "+h);else{f=a.DISASSEMBLE_MAP[c];var k=a.multiParamSize(c),l=[];for(var m=0;m<k;m++)d=b[++i],typeof d=="string"&&(d='"'+d.replace("\n","\\n")+'"'),l.push(d);f=f+" "+l.join(" "),e.push(f)}}return e.join("\n")},guid:0,compile:function(a,b){this.children=[],this.depths={list:[]},this.options=b||{};return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){var b=a.statements,c;this.opcodes=[];for(var d=0,e=b.length;d<e;d++)c=b[d],this[c.type](c);this.depths.list=this.depths.list.sort(function(a,b){return a-b});return this},compileProgram:function(a){var b=(new this.compiler).compile(a,this.options),c=this.guid++;this.usePartial=this.usePartial||b.usePartial,this.children[c]=b;for(var d=0,e=b.depths.list.length;d<e;d++){depth=b.depths.list[d];if(depth<2)continue;this.addDepth(depth-1)}return c},block:function(a){var b=a.mustache,c,d,e,f,g=this.setupStackForMustache(b),h=this.compileProgram(a.program);a.program.inverse&&(f=this.compileProgram(a.program.inverse),this.declare("inverse",f)),this.opcode("invokeProgram",h,g.length),this.declare("inverse",null),this.opcode("append")},inverse:function(a){this.ID(a.mustache.id);var b=this.compileProgram(a.program);this.opcode("invokeInverse",b),this.opcode("append")},hash:function(a){var b=a.pairs,c,d;this.opcode("push","{}");for(var e=0,f=b.length;e<f;e++)c=b[e],d=c[1],this.accept(d),this.opcode("assignToHash",c[0])},partial:function(a){var b=a.id;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","context"),this.opcode("invokePartial",b.original),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){var b=this.setupStackForMustache(a);this.opcode("invokeMustache",b.length,a.id.original),a.escaped?this.opcode("appendEscaped"):this.opcode("append")},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth),this.opcode("lookupWithHelpers",a.parts[0]||null);for(var b=1,c=a.parts.length;b<c;b++)this.opcode("lookup",a.parts[b])},STRING:function(a){this.opcode("pushString",a.string)},comment:function(){},pushParams:function(a){var b=a.length,c;while(b--)c=a[b],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.string)):this[c.type](c)},opcode:function(b,c,d){this.opcodes.push(a.OPCODE_MAP[b]),c!==undefined&&this.opcodes.push(c),d!==undefined&&this.opcodes.push(d)},declare:function(a,b){this.opcodes.push("DECLARE"),this.opcodes.push(a),this.opcodes.push(b)},addDepth:function(a){a!==0&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},setupStackForMustache:function(a){var b=a.params;this.pushParams(b),a.hash?this.hash(a.hash):this.opcode("push","{}"),this.ID(a.id);return b}},b.prototype={nameLookup:function(a,c,d){return b.RESERVED_WORDS[c]?a+"['"+c+"']":a+"."+c},appendToBuffer:function(a){return"buffer = buffer + "+a+";"},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b){this.environment=a,this.options=b||{},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileChildren(a,b),Handlebars.log(Handlebars.logger.DEBUG,a.disassemble()+"\n\n");var c=a.opcodes,d,e,f,h;this.i=0;for(g=c.length;this.i<g;this.i++)d=this.nextOpcode(0),d[0]==="DECLARE"?(this.i=this.i+2,this[d[1]]=d[2]):(this.i=this.i+d[1].length,this[d[0]].apply(this,d[1]));return this.createFunction()},nextOpcode:function(b){var c=this.environment.opcodes,d=c[this.i+b],e,f,g,h;if(d==="DECLARE"){e=c[this.i+1],f=c[this.i+2];return["DECLARE",e,f]}e=a.DISASSEMBLE_MAP[d],g=a.multiParamSize(d),h=[];for(var i=0;i<g;i++)h.push(c[this.i+i+1+b]);return[e,h]},eat:function(a){this.i=this.i+a.length},preamble:function(){var a=[];a.push("var buffer = "+this.initializeBuffer()+", currentContext = context");var b="helpers = helpers || Handlebars.helpers;";this.environment.usePartial&&(b=b+" partials = partials || Handlebars.partials;"),a.push(b),this.lastContext=0,this.source=a},createFunction:function(){var a={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(a,b,c,d){var e=this.programs[a];if(d)return Handlebars.VM.program(this.children[a],b,c,d);if(e)return e;e=this.programs[a]=Handlebars.VM.program(this.children[a],b,c);return e},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop},b=this.stackVars.concat(this.registers.list);b.length>0&&(this.source[0]=this.source[0]+", "+b.join(", ")),this.source[0]=this.source[0]+";",this.source.push("return buffer;");var c=["Handlebars","context","helpers","partials"];this.options.data&&c.push("data");for(var d=0,e=this.environment.depths.list.length;d<e;d++)c.push("depth"+this.environment.depths.list[d]);c.length===4&&!this.environment.usePartial&&c.pop(),c.push(this.source.join("\n"));var f=Function.apply(this,c);f.displayName="Handlebars.js",Handlebars.log(Handlebars.logger.DEBUG,f.toString()+"\n\n"),a.render=f,a.children=this.environment.children;return function(b,c,d,e,f){try{var g=Array.prototype.slice.call(arguments);g.unshift(Handlebars);return a.render.apply(a,g)}catch(h){throw h}}},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},append:function(){var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }")},appendEscaped:function(){var a=this.nextOpcode(1),b="";a[0]==="appendContent"&&(b=" + "+this.quotedString(a[1][0]),this.eat(a)),this.source.push(this.appendToBuffer("this.escapeExpression("+this.popStack()+")"+b))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a,a===0?this.source.push("currentContext = context;"):this.source.push("currentContext = depth"+a+";"))},lookupWithHelpers:function(a){if(a){var b=this.nextStack(),c="if('"+a+"' in helpers) { "+b+" = "+this.nameLookup("helpers",a,"helper")+"; } else { "+b+" = "+this.nameLookup("currentContext",a,"context")+"; }";this.source.push(c)}else this.pushStack("currentContext")},lookup:function(a){var b=this.topStack();this.source.push(b+" = "+this.nameLookup(b,a,"context")+";")},pushStringParam:function(a){this.pushStack("currentContext"),this.pushString(a)},pushString:function(a){this.pushStack(this.quotedString(a))},push:function(a){this.pushStack(a)},invokeMustache:function(a,b){this.populateParams(a,this.quotedString(b),"{}",null,function(a,b,c){this.source.push("else if("+c+"=== undefined) { "+a+" = helpers.helperMissing.call("+b+"); }"),this.source.push("else { "+a+" = "+c+"; }")})},invokeProgram:function(a,b){var c=this.programExpression(this.inverse),d=this.programExpression(a);this.populateParams(b,null,d,c,function(a,b,c){this.source.push("else { "+a+" = helpers.blockHelperMissing.call("+b+"); }")})},populateParams:function(a,b,c,d,e){var f=this.popStack(),g,h=[],i,j,k=this.popStack();this.register("tmp1",c),this.source.push("tmp1.hash = "+k+";"),this.options.stringParams&&this.source.push("tmp1.contexts = [];");for(var l=0;l<a;l++)i=this.popStack(),h.push(i),this.options.stringParams&&this.source.push("tmp1.contexts.push("+this.popStack()+");");d&&(this.source.push("tmp1.fn = tmp1;"),this.source.push("tmp1.inverse = "+d+";")),this.options.data&&this.source.push("tmp1.data = data;"),h.push("tmp1"),d&&h.push(d),this.populateCall(h,f,b||f,e)},populateCall:function(a,b,c,d){var e=["context"].concat(a).join(", "),f=["context"].concat(c).concat(a).join(", ");nextStack=this.nextStack(),this.source.push("if(typeof "+b+" === 'function') { "+nextStack+" = "+b+".call("+e+"); }"),d.call(this,nextStack,f,b)},invokeInverse:function(a){var b=this.programExpression(a),c=["context",this.topStack(),"this.noop",b];this.pushStack("helpers.blockHelperMissing.call("+c.join(", ")+")")},invokePartial:function(a){this.pushStack("this.invokePartial("+this.nameLookup("partials",a,"partial")+", '"+a+"', "+this.popStack()+", helpers, partials);")},assignToHash:function(a){var b=this.popStack(),c=this.topStack();this.source.push(c+"['"+a+"'] = "+b+";")},compiler:b,compileChildren:function(a,b){var c=a.children,d,e,f=[];for(var g=0,h=c.length;g<h;g++)d=c[g],e=new this.compiler,f[g]=e.compile(d,b);a.rawChildren=c,a.children=f},programExpression:function(a){if(a==null)return"this.noop";var b=[a,"helpers","partials"],c=this.environment.rawChildren[a].depths.list;this.options.data&&b.push("data");for(var d=0,e=c.length;d<e;d++)depth=c[d],depth===1?b.push("context"):b.push("depth"+(depth-1));this.environment.usePartial||(b[3]?b[2]="null":b.pop());if(c.length===0)return"this.program("+b.join(", ")+")";b[0]="this.children["+a+"]";return"this.programWithDepth("+b.join(", ")+")"},register:function(a,b){this.useRegister(a),this.source.push(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStack:function(a){this.source.push(this.nextStack()+" = "+a+";");return"stack"+this.stackSlot},nextStack:function(){this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(a){return'"'+a.replace(/\\/,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var e="break case catch continue default delete do else finally for function if in instanceof new return switch this throw try typeof var void while with null true false".split(" ");compilerWords=b.RESERVED_WORDS={};for(var f=0,g=e.length;f<g;f++)compilerWords[e[f]]=!0}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.VM={programWithDepth:function(a){var b=Array.prototype.slice.call(arguments,1);return function(c,d,e,f){b[0]=d||b[0],b[1]=e||b[1],b[2]=f||b[2];return a.apply(this,[c].concat(b))}},program:function(a,b,c,d){return function(e,f,g,h){return a(e,f||b,g||c,h||d)}},noop:function(){return""},compile:function(a,b){var c=Handlebars.parse(a),d=(new Handlebars.Compiler).compile(c,b);return(new Handlebars.JavaScriptCompiler).compile(d,b)},invokePartial:function(a,b,c,d,e){if(a===undefined)throw new Handlebars.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,d,e);e[b]=Handlebars.VM.compile(a);return e[b](c,d,e)}},Handlebars.compile=Handlebars.VM.compile,SC.DROP_ON=1,SC.DROP_BEFORE=2,SC.DROP_AFTER=4,SC.DROP_ANY=7,SC.ALIGN_LEFT="left",SC.ALIGN_RIGHT="right",SC.ALIGN_CENTER="center",SC.ALIGN_TOP="top",SC.ALIGN_MIDDLE="middle",SC.ALIGN_BOTTOM="bottom",SC.ALIGN_TOP_LEFT="top-left",SC.ALIGN_TOP_RIGHT="top-right",SC.ALIGN_BOTTOM_LEFT="bottom-left",SC.ALIGN_BOTTOM_RIGHT="bottom-right",SC.SAFARI_FOCUS_BEHAVIOR=YES,SC.mixin({data:function(a,b,c){a=a===window?"@window":a;var d=SC.hashFor(a),e=SC._data_cache;e||(SC._data_cache=e={});var f=e[d];b&&!f&&(e[d]=f={}),f&&c!==undefined&&(f[b]=c);return b?f[b]:f},removeData:function(a,b){a=a===window?"@window":a;var c=SC.hashFor(a),d=SC._data_cache;if(!d)return undefined;var e=d[c];if(!e)return undefined;var f=b?e[b]:e;b?delete e[b]:delete d[c];return f},STRINGS:{},stringsFor:function(a,b){SC.mixin(SC.STRINGS,b);return this}});if(typeof CHANCE_SLICES=="undefined")var CHANCE_SLICES=[];CHANCE_SLICES=CHANCE_SLICES.concat([]),SC.Controller=SC.Object.extend({isEditable:YES}),sc_require("controllers/controller"),SC.ArrayController=SC.Controller.extend(SC.Array,{content:null,isEditable:YES,orderBy:null,allowsSingleContent:YES,destroyOnRemoval:NO,arrangedObjects:function(){return this}.property().cacheable(),canRemoveContent:function(){var a=this.get("content"),b;b=!!a&&this.get("isEditable")&&this.get("hasContent");return b?!a.isEnumerable||SC.typeOf(a.removeObject)===SC.T_FUNCTION:NO}.property("content","isEditable","hasContent"),canReorderContent:function(){var a=this.get("content"),b;b=!!a&&this.get("isEditable")&&!this.get("orderBy");return b&&!!a.isSCArray}.property("content","isEditable","orderBy"),canAddContent:function(){var a=this.get("content"),b;b=a&&this.get("isEditable")&&a.isEnumerable;return b?SC.typeOf(a.addObject)===SC.T_FUNCTION||SC.typeOf(a.pushObject)===SC.T_FUNCTION:NO}.property("content","isEditable"),hasContent:function(){var a=this.get("content");return!!a&&(!!a.isEnumerable||!!this.get("allowsSingleContent"))}.property("content","allowSingleContent"),status:function(){var a=this.get("content"),b=a?a.get("status"):null;return b?b:SC.Record.READY}.property().cacheable(),addObject:function(a){if(!this.get("canAddContent"))throw"%@ cannot add content".fmt(this);var b=this.get("content");if(b.isSCArray)b.pushObject(a);else if(b.addObject)b.addObject(a);else throw"%@.content does not support addObject".fmt(this);return this},removeObject:function(a){if(!this.get("canRemoveContent"))throw"%@ cannot remove content".fmt(this);var b=this.get("content");b.isEnumerable?b.removeObject(a):this.set("content",null),this.get("destroyOnRemoval")&&a.destroy&&a.destroy();return this},length:function(){var a=this._scac_observableContent();return a?a.get("length"):0}.property().cacheable(),objectAt:function(a){var b=this._scac_observableContent();return b?b.objectAt(a):undefined},replace:function(a,b,c){if(!c||c.get("length")===0){if(!this.get("canRemoveContent"))throw"%@ cannot remove objects from the current content".fmt(this)}else if(!this.get("canReorderContent"))throw"%@ cannot add or reorder the current content".fmt(this);var d=this.get("content"),e=[],f,g;if(this.get("destroyOnRemoval"))for(f=0;f<b;f++)e.push(d.objectAt(f+a));d&&d.replace(a,b,c);for(f=0,g=e.length;f<g;f++)e[f].destroy();e=null;return this},indexOf:function(a,b){var c=this._scac_observableContent();return c?c.indexOf(a,b):-1},init:function(){arguments.callee.base.apply(this,arguments),this._scac_contentDidChange()},_scac_cached:NO,_scac_observableContent:function(){var a=this._scac_cached;if(a)return a;var b=this.get("content"),c,d,e;if(SC.none(b))return this._scac_cached=[];if(!b.isEnumerable){a=this.get("allowsSingleContent")?[b]:[];return this._scac_cached=a}var f=this.get("orderBy");if(!f){if(b.isSCArray)return this._scac_cached=b;throw"%@.orderBy is required for unordered content".fmt(this)}var g=SC.typeOf(f);if(g===SC.T_STRING)f=[f];else if(g===SC.T_FUNCTION)c=f;else if(g!==SC.T_ARRAY)throw"%@.orderBy must be Array, String, or Function".fmt(this);c=c||function(a,b){var c,d,g,h;for(var i=0,j=f.get("length");i<j&&!c;i++)d=f.objectAt(i),g=d.match(/^(ASC )?(DESC )?(.*)$/),d=g[3],e=g[2]?-1:1,a&&(a=a.isObservable?a.get(d):a[d]),b&&(b=b.isObservable?b.get(d):b[d]),c=SC.compare(a,b)*e;return c};return this._scac_cached=b.toArray().sort(c)},propertyWillChange:function(a){if(a==="content")this.arrayContentWillChange(0,this.get("length"),0);else return arguments.callee.base.apply(this,arguments)},_scac_arrayContentWillChange:function(a,b,c){this.arrayContentWillChange(a,b,c);var d=this.slice(a,a+b);this.teardownEnumerablePropertyChains(d)},_scac_arrayContentDidChange:function(a,b,c){this.arrayContentDidChange(a,b,c);var d=this.slice(a,a+c);this.setupEnumerablePropertyChains(d)},_scac_contentDidChange:function(){this._scac_cached=NO;var a=this.get("content"),b=!!this.get("orderBy"),c=this._scac_content,d=this._scac_length||0,e=this._scac_arrayContentDidChange,f=this._scac_arrayContentWillChange,g=this._scac_contentStatusDidChange,h=this._scac_enumerableDidChange,i;if(a===c)return this;c&&(c.isSCArray?c.removeArrayObservers({target:this,didChange:e,willChange:f}):c.isEnumerable&&c.removeObserver("[]",this,h),c.removeObserver("status",this,g)),this._scac_cached=NO,this._scac_content=a,a?(a.isSCArray?(a.addArrayObservers({target:this,didChange:e,willChange:f}),i=a.get("length")):a.isEnumerable?(a.addObserver("[]",this,h),i=a.get("length")):i=1,a.addObserver("status",this,g)):i=SC.none(a)?0:1,this._scac_length=i,this._scac_contentStatusDidChange(),this.arrayContentDidChange(0,0,i)}.observes("content"),_scac_enumerableContentDidChange:function(a,b,c){},_scac_enumerableDidChange:function(){var a=this.get("content"),b=a?a.get("length"):0,c=this._scac_length;this._scac_length=b,this.beginPropertyChanges(),this._scac_cached=NO,this.arrayContentDidChange(0,c,b),this.endPropertyChanges()}.observes("orderBy"),_scac_contentStatusDidChange:function(){this.notifyPropertyChange("status")}}),sc_require("controllers/controller"),SC.ObjectController=SC.Controller.extend({content:null,allowsMultipleContent:NO,hasContent:function(){return!SC.none(this.get("observableContent"))}.property("observableContent"),isEditable:YES,observableContent:function(){var a=this.get("content"),b,c;if(a&&a.isEnumerable){b=a.get("length"),c=this.get("allowsMultipleContent");if(b===1)a=a.firstObject();else if(b===0||!c)a=null;a&&!c&&a.isEnumerable&&(a=null)}return a}.property("content","allowsMultipleContent").cacheable(),destroy:function(){var a=this.get("observableContent");a&&SC.typeOf(a.destroy)===SC.T_FUNCTION&&a.destroy(),this.set("content",null);return this},contentPropertyDidChange:function(a,b){b==="*"?this.allPropertiesDidChange():this.notifyPropertyChange(b)},unknownProperty:function(a,b){if(a==="content"){b!==undefined&&(this.content=b);return this.content}var c=this.get("observableContent"),d,e,f;if(c===null||c===undefined)return undefined;if(b===undefined)if(c.isEnumerable){b=c.getEach(a),d=b.get("length");if(d>0){f=YES,e=b.objectAt(0);while(--d>0&&f)e!==b.objectAt(d)&&(f=NO);f&&(b=e)}else b=undefined}else b=c.isObservable?c.get(a):c[a];else{if(!this.get("isEditable"))throw"%@.%@ is not editable".fmt(this,a);c.isEnumerable?c.setEach(a,b):c.isObservable?c.set(a,b):c[a]=b}return b},init:function(){arguments.callee.base.apply(this,arguments),this.get("content")&&this._scoc_contentDidChange(),this.get("observableContent")&&this._scoc_observableContentDidChange()},_scoc_contentDidChange:function(){var a=this._scoc_content,b=this.get("content");if(a!==b){this._scoc_content=b;var c=this._scoc_enumerableContentDidChange;a&&a.isEnumerable&&a.removeObserver("[]",this,c),b&&b.isEnumerable&&b.addObserver("[]",this,c)}}.observes("content"),_scoc_observableContentDidChange:function(){var a=this._scoc_observableContent,b=this.get("observableContent"),c=this.contentPropertyDidChange,d=this._scoc_enumerableContentDidChange;if(a===b)return this;this._scoc_observableContent=b,a&&(a.isEnumerable?a.removeObserver("[]",this,d):a.isObservable&&a.removeObserver("*",this,c)),b&&(b.isEnumerable?b.addObserver("[]",this,d):b.isObservable&&b.addObserver("*",this,c)),a&&a.isEnumerable||b&&b.isEnumerable?this._scoc_enumerableContentDidChange():this.contentPropertyDidChange(b,"*")}.observes("observableContent"),_scoc_enumerableContentDidChange:function(){var a=this.get("observableContent"),b=this._scoc_observableContentItems,c=this.contentPropertyDidChange;b&&(b.forEach(function(a){a.isObservable&&a.removeObserver("*",this,c)},this),b.clear()),a&&a.isEnumerable?(b||(b=SC.Set.create()),a.forEach(function(a){b.contains(a)||(b.add(a),a.isObservable&&a.addObserver("*",this,c))},this)):b=null,this._scoc_observableContentItems=b,this.contentPropertyDidChange(a,"*");return this}}),SC.mixin(Function.prototype,{invokeLater:function(a,b){b===undefined&&(b=1);var c=this;if(arguments.length>2){var d=SC.$A(arguments).slice(2,arguments.length);d.unshift(a);var e=c;c=function(){return e.apply(this,d.slice(1))}}return SC.Timer.schedule({target:a,action:c,interval:b})}}),SC.Handlebars={},SC.Handlebars.Compiler=function(){},SC.Handlebars.Compiler.prototype=SC.beget(Handlebars.Compiler.prototype),SC.Handlebars.Compiler.prototype.compiler=SC.Handlebars.Compiler,SC.Handlebars.JavaScriptCompiler=function(){},SC.Handlebars.JavaScriptCompiler.prototype=SC.beget(Handlebars.JavaScriptCompiler.prototype),SC.Handlebars.JavaScriptCompiler.prototype.compiler=SC.Handlebars.JavaScriptCompiler,SC.Handlebars.JavaScriptCompiler.prototype.nameLookup=function(a,b,c){return c==="context"?"SC.get("+a+", "+this.quotedString(b)+");":Handlebars.JavaScriptCompiler.prototype.nameLookup.call(this,a,b,c)},SC.Handlebars.Compiler.prototype.mustache=function(a){if(a.params.length||a.hash)return Handlebars.Compiler.prototype.mustache.call(this,a);var b=new Handlebars.AST.IdNode(["bind"]);a=new Handlebars.AST.MustacheNode([b].concat([a.id]),a.hash,!a.escaped);return Handlebars.Compiler.prototype.mustache.call(this,a)},SC.Handlebars.compile=function(a){var b=Handlebars.parse(a),c=(new SC.Handlebars.Compiler).compile(b,{data:!0,stringParams:!0}),d=(new SC.Handlebars.JavaScriptCompiler).compile(c,{data:!0,stringParams:!0});d.rawTemplate=a;return d},Handlebars.registerHelper("helperMissing",function(a,b){var c;c="%@ Handlebars error: Could not find property '%@' on object %@.";throw c.fmt(b.data.view,a,this)}),sc_require("ext/handlebars"),function(){var a=function(a,b,c,d){var e=b.data,f=b.fn,g=b.inverse,h=e.view;if(this.isObservable){var i=h.createChildView(SC._BindableSpan,{preserveContext:c,shouldDisplayFunc:d,displayTemplate:f,inverseTemplate:g,property:a,previousContext:this});h.get("childViews").push(i),this.addObserver(a,this,function j(){i.get("element")?i.rerender():this.removeObserver(a,this,j)});var k=i.renderContext(i.get("tagName"));i.renderToContext(k);return new Handlebars.SafeString(k.join())}return SC.getPath(this,a)};Handlebars.registerHelper("bind",function(b,c){return a.call(this,b,c,!1,function(a){return!SC.none(a)})}),Handlebars.registerHelper("boundIf",function(b,c){if(c)return a.call(this,b,c,!0,function(a){if(SC.typeOf(a)===SC.T_ARRAY){if(a.length!==0)return!0;return!1}return!!a});throw"Cannot use boundIf helper without a block."})}(),Handlebars.registerHelper("with",function(a,b){return Handlebars.helpers.bind.call(b.contexts[0],a,b)}),Handlebars.registerHelper("if",function(a,b){return Handlebars.helpers.boundIf.call(b.contexts[0],a,b)}),Handlebars.registerHelper("unless",function(a,b){var c=b.fn,d=b.inverse;b.fn=d,b.inverse=c;return Handlebars.helpers.boundIf.call(b.contexts[0],a,b)}),Handlebars.registerHelper("bindAttr",function(a){var b=a.hash,c=a.data.view,d=[],e=jQuery.uuid++,f=b["class"];if(f!=null){var g=SC.Handlebars.bindClasses(this,f,c,e);d.push('class="'+g.join(" ")+'"'),delete b["class"]}var h=SC.keys(b);h.forEach(function(a){var f=b[a],g=this.getPath(f);this.addObserver(f,function h(){var b=this.getPath(f),d=c.$("[data-handlebars-id='"+e+"']");d.length===0?this.removeObserver(f,h):b===NO?d.removeAttr(a):b===YES?d.attr(a,a):d.attr(a,b)}),g===YES&&(g=a),g!==NO&&d.push(a+'="'+g+'"')},this),d.push('data-handlebars-id="'+e+'"');return d.join(" ")}),SC.Handlebars.bindClasses=function(a,b,c,d){var e=[],f,g,h,i=function(b){var c=a.getPath(b);return c===YES?SC.String.dasherize(b.split(".").get("lastObject")):c!==NO&&c!==undefined&&c!==null?c:null};b.split(" ").forEach(function(b){var j,k=function(){f=i(b),h=d?c.$("[data-handlebars-id='"+d+"']"):c.$(),h.length===0?a.removeObserver(b,k):(j&&h.removeClass(j),f?(h.addClass(f),j=f):j=null)};a.addObserver(b,k),g=i(b),g&&(e.push(g),j=g)});return e},sc_require("ext/handlebars"),Handlebars.registerHelper("collection",function(a,b){var c=b.fn,d=b.data,e=b.inverse,f,g;f=a?SC.objectForPropertyPath(a):SC.TemplateCollectionView;if(!f)throw"%@ #collection: Could not find %@".fmt(d.view,a);var h=c.hash,i={},j;for(var k in h)c.hash.hasOwnProperty(k)&&(j=k.match(/^item(.)(.*)$/),j&&(i[j[1].toLowerCase()+j[2]]=h[k],delete h[k]));if(c){var l=SC.clone(h);SC.mixin(l,{itemViewTemplate:c,inverseTemplate:e,itemViewOptions:i}),f.isClass?g=f.extend(l):(SC.mixin(f,l),g=f)}b.fn=function(){return""};return Handlebars.helpers.view.call(this,g,b)}),Handlebars.registerHelper("each",function(a,b){b.hash.contentBinding=SC.Binding.from("*"+a,this),b.hash.itemContextProperty="content";return Handlebars.helpers.collection.call(this,null,b)}),sc_require("ext/handlebars"),Handlebars.registerHelper("loc",function(a){return SC.String.loc(a)}),sc_require("ext/handlebars"),SC.Handlebars.ViewHelper=SC.Object.create({helper:function(a,b,c){var d=c.inverse,e=c.data,f=e.view,g=c.fn,h=c.hash,i;if(b.isClass||b.isObject){i=b;if(!i)throw"Null or undefined object was passed to the #view helper. Did you mean to pass a property path string?"}else{b.charAt(0)==="."?i=SC.objectForPropertyPath(b.slice(1),f):(i=SC.getPath(a,b),i||(i=SC.getPath(b)));if(!i)throw"Unable to find view at path '"+b+"'"}h.id&&(h.elementId=h.id);var j={id:h.id,"class":h["class"],classBinding:h.classBinding};delete h.id,delete h["class"],delete h.classBinding,i.isClass?i=i.extend(h):SC.mixin(i,h);var k=e.view,l=k.get("childViews"),m=k.createChildView
(i);g&&(m.template=g),l.pushObject(m);var n=SC.RenderContext(m.get("tagName"));this.applyAttributes(j,m,n),m.applyAttributesToContext(n),m.render(n,YES);return new Handlebars.SafeString(n.join())},applyAttributes:function(a,b,c){var d=a.id,e=a["class"];e&&c.addClass(e.split(" ")),d&&(b.set("elementId",d),c.id(d));var f=a.classBinding;f&&SC.Handlebars.bindClasses(b,f,b).forEach(function(a){c.setClass(a,YES)})}}),Handlebars.registerHelper("view",function(a,b){return SC.Handlebars.ViewHelper.helper(this,a,b)}),SC.mixin(SC.Object.prototype,{invokeLater:function(a,b){b===undefined&&(b=1);var c=a,d,e;arguments.length>2&&(d=SC.$A(arguments).slice(2),SC.typeOf(c)===SC.T_STRING&&(c=this[a]),e=c,c=function(){return e.apply(this,d)});return SC.Timer.schedule({target:this,action:c,interval:b})},invokeWith:function(a,b,c){c===undefined&&(c=b,b=this),b||(b=this),SC.typeOf(c)===SC.T_STRING&&(c=b[c]);var d=this.getPath(a);c.call(b,d,this);return this}}),SC.RunLoop=SC.RunLoop.extend({startTime:function(){this._start||(this._start=Date.now());return this._start}.property(),endRunLoop:function(){this.fireExpiredTimers();var a=arguments.callee.base.apply(this,arguments);this.scheduleNextTimeout();return a},scheduleTimer:function(a,b){this._timerQueue=a.removeFromTimerQueue(this._timerQueue),this._timerQueue=a.scheduleInTimerQueue(this._timerQueue,b);return this},cancelTimer:function(a){this._timerQueue=a.removeFromTimerQueue(this._timerQueue);return this},TIMER_ARRAY:[],fireExpiredTimers:function(){if(!this._timerQueue||this._firing)return NO;var a=this.get("startTime"),b=this.TIMER_ARRAY,c,d,e;this._firing=YES,this._timerQueue=this._timerQueue.collectExpiredTimers(b,a),d=b.length;for(c=0;c<d;c++)b[c].fire();e=b.length>0,b.length=0,this._firing=NO;return e},scheduleNextTimeout:function(){var a=this._timerQueue,b=NO;if(!a)this._timeout&&clearTimeout(this._timeout);else{var c=a._timerQueueRunTime;if(this._timeoutAt!==c){this._timeout&&clearTimeout(this._timeout);var d=Math.max(0,c-Date.now());this._timeout=setTimeout(this._timeoutDidFire,d),this._timeoutAt=c}b=YES}return b},_timeoutDidFire:function(){var a=SC.RunLoop.currentRunLoop;a._timeout=a._timeoutAt=null,SC.run()}}),SC.RunLoop.currentRunLoop=SC.RunLoop.create(),SC.browser={},SC.Locale=SC.Object.extend({init:function(){this.language||SC.Locale._assignLocales();if(!this.hasStrings){var a=this._deprecatedLanguageCodes||[];a.push(this.language);var b=a.length,c=null;while(!c&&--b>=0)c=String[a[b]];c&&(this.hasStrings=YES,this.strings=c)}},hasStrings:NO,strings:{},toString:function(){this.language||SC.Locale._assignLocales();return"SC.Locale["+this.language+"]"+SC.guidFor(this)},locWithDefault:function(a,b){var c=this.strings[a];if(SC.typeOf(c)===SC.T_STRING)return c;if(SC.typeOf(b)===SC.T_STRING)return b;return a}}),SC.Locale.mixin({useAutodetectedLanguage:NO,preferredLanguage:null,createCurrentLocale:function(){var a=String.useAutodetectedLanguage!==undefined?String.useAutodetectedLanguage:this.useAutodetectedLanguage,b=String.preferredLanguage!==undefined?String.preferredLanguage:this.preferredLanguage,c=(a?SC.browser.language:null)||b||SC.browser.language||"en";c=SC.Locale.normalizeLanguage(c);var d=this.localeClassFor(c);c!=this.currentLanguage&&(this.currentLanguage=c,this.currentLocale=d.create());return this.currentLocale},localeClassFor:function(a){a=SC.Locale.normalizeLanguage(a);var b,c=this.locales[a];!c&&(b=a.split("-")[0])!==a&&(c=this.locales[b])&&(c=this.locales[a]=c.extend()),c||(c=this.locales[a]=this.locales.en.extend());return c},define:function(a,b){var c;b===undefined&&SC.typeOf(a)!==SC.T_STRING?(c=this,b=a):c=SC.Locale.localeClassFor(a),SC.mixin(c.prototype,b);return c},options:function(){return this.prototype},addStrings:function(a){var b=this.prototype.strings;b?this.prototype.hasOwnProperty("strings")||(this.prototype.strings=SC.clone(b)):b=this.prototype.strings={},a&&(this.prototype.strings=SC.mixin(b,a)),this.prototype.hasStrings=YES;return this},_map:{english:"en",french:"fr",german:"de",japanese:"ja",jp:"ja",spanish:"es"},normalizeLanguage:function(a){if(!a)return"en";return SC.Locale._map[a.toLowerCase()]||a},_assignLocales:function(){for(var a in this.locales)this.locales[a].prototype.language=a},toString:function(){this.prototype.language||SC.Locale._assignLocales();return"SC.Locale["+this.prototype.language+"]"},extend:function(){var a=SC.Object.extend.apply(this,arguments);a.addStrings=SC.Locale.addStrings,a.define=SC.Locale.define,a.options=SC.Locale.options,a.toString=SC.Locale.toString;return a}}),SC.Locale.locales={en:SC.Locale.extend({_deprecatedLanguageCodes:["English"]}),fr:SC.Locale.extend({_deprecatedLanguageCodes:["French"]}),de:SC.Locale.extend({_deprecatedLanguageCodes:["German"]}),ja:SC.Locale.extend({_deprecatedLanguageCodes:["Japanese","jp"]}),es:SC.Locale.extend({_deprecatedLanguageCodes:["Spanish"]})},SC.stringsFor=function(a,b){var c=SC.Locale.localeClassFor(a);c.addStrings(b);return this},sc_require("system/locale"),SC.STRING_TITLEIZE_REGEXP=/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g,SC.STRING_DECAMELIZE_REGEXP=/([a-z])([A-Z])/g,SC.STRING_DASHERIZE_REGEXP=/[ _]/g,SC.STRING_DASHERIZE_CACHE={},SC.mixin(SC.String,{capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},camelize:function(a){var b=a.replace(SC.STRING_TITLEIZE_REGEXP,function(a,b,c){return c?c.toUpperCase():""}),c=b.charAt(0),d=c.toLowerCase();return c!==d?d+b.slice(1):b},decamelize:function(a){return a.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2").toLowerCase()},dasherize:function(a){var b=SC.STRING_DASHERIZE_CACHE,c=b[a];if(c)return c;c=SC.String.decamelize(a).replace(SC.STRING_DASHERIZE_REGEXP,"-"),b[a]=c;return c},loc:function(a){SC.Locale.currentLocale||SC.Locale.createCurrentLocale();var b=SC.Locale.currentLocale.locWithDefault(a);SC.typeOf(b)!==SC.T_STRING&&(b=a);var c=SC.$A(arguments);c.shift();return SC.String.fmt(b,arguments)},locWithDefault:function(a,b){SC.Locale.currentLocale||SC.Locale.createCurrentLocale();var c=SC.Locale.currentLocale.locWithDefault(a,b);SC.typeOf(c)!==SC.T_STRING&&(c=a);var d=SC.$A(arguments);d.shift(),d.shift();return SC.String.fmt(c,d)}}),sc_require("system/string"),SC.supplement(String.prototype,{capitalize:function(){return SC.String.capitalize(this,arguments)},camelize:function(){return SC.String.camelize(this,arguments)},decamelize:function(){return SC.String.decamelize(this,arguments)},dasherize:function(){return SC.String.dasherize(this,arguments)},loc:function(){return SC.String.loc(this,arguments)},locWithDefault:function(a){return SC.String.locWithDefault(this,a,arguments)}}),SC.Responder=SC.Object.extend({isResponder:YES,pane:null,responderContext:null,nextResponder:null,isFirstResponder:NO,hasFirstResponder:NO,acceptsFirstResponder:YES,becomingFirstResponder:NO,becomeFirstResponder:function(){var a=this.get("pane")||this.get("responderContext")||this.pane();a&&this.get("acceptsFirstResponder")&&a.get("firstResponder")!==this&&a.makeFirstResponder(this);return this},resignFirstResponder:function(a){var b=this.get("pane")||this.get("responderContext");b&&b.get("firstResponder")===this&&b.makeFirstResponder(null,a);return YES},willLoseFirstResponder:function(a){},didBecomeFirstResponder:function(a){}}),sc_require("system/responder"),SC.ResponderContext={isResponderContext:YES,trace:NO,defaultResponder:null,nextResponder:function(){return this.get("defaultResponder")}.property("defaultResponder").cacheable(),firstResponder:null,nextResponderFor:function(a){var b=a.get("nextResponder");typeof b===SC.T_STRING?b=SC.objectForPropertyPath(b,this):!b&&a!==this&&(b=this);return b},responderNameFor:function(a){if(!a)return"(No Responder)";if(a._scrc_name)return a._scrc_name;var b=this.NAMESPACE;this._findResponderNamesFor(this,3,b?[this.NAMESPACE]:[]);return a._scrc_name||a.toString()},_findResponderNamesFor:function(a,b,c){var d,e;for(d in a){if(d==="nextResponder")continue;e=a[d];if(e&&e.isResponder){if(e._scrc_name)continue;c.push(d),e._scrc_name=c.join("."),b>0&&this._findResponderNamesFor(e,b-1,c),c.pop()}}},makeFirstResponder:function(a,b){var c=this.get("firstResponder"),d=this.get("nextResponder"),e=this.get("trace"),f;if(this._locked)e&&SC.Logger.log("%@: AFTER ACTION: makeFirstResponder => %@".fmt(this,this.responderNameFor(a))),this._pendingResponder=a;else{e&&SC.Logger.log("%@: makeFirstResponder => %@".fmt(this,this.responderNameFor(a))),a&&a.set("becomingFirstResponder",YES),this._locked=YES,this._pendingResponder=null,f=a?a:null;while(f){if(f.get("hasFirstResponder"))break;f=f===d?null:this.nextResponderFor(f)}f||(f=d),this._notifyWillLoseFirstResponder(c,c,f,b),c&&c.set("isFirstResponder",NO),this.beginPropertyChanges(),this.set("firstResponder",a),a&&a.set("isFirstResponder",YES),this._notifyDidBecomeFirstResponder(a,a,f),this.endPropertyChanges(),this._locked=NO,this._pendingResponder&&(this.makeFirstResponder(this._pendingResponder),this._pendingResponder=null),a&&a.set("becomingFirstResponder",NO);return this}},_notifyWillLoseFirstResponder:function(a,b,c,d){if(b!==c){b.willLoseFirstResponder(a,d),b.set("hasFirstResponder",NO);var e=this.nextResponderFor(b);e&&this._notifyWillLoseFirstResponder(a,e,c)}},_notifyDidBecomeFirstResponder:function(a,b,c){if(b!==c){var d=this.nextResponderFor(b);d&&this._notifyDidBecomeFirstResponder(a,d,c),b.set("hasFirstResponder",YES),b.didBecomeFirstResponder(a)}},resetFirstResponder:function(){var a=this.get("firstResponder");!a||(a.willLoseFirstResponder(),a.didBecomeFirstResponder())},sendAction:function(a,b,c){var d=this.get("firstResponder"),e=this.get("nextResponder"),f=this.get("trace"),g=NO,h;this._locked=YES,f&&SC.Logger.log("%@: begin action '%@' (%@, %@)".fmt(this,a,b,c)),!g&&!d&&this.tryToPerform&&(g=this.tryToPerform(a,b,c));while(!g&&d)d.tryToPerform&&(g=d.tryToPerform(a,b,c)),g||(d=d===e?null:this.nextResponderFor(d));f&&(g?SC.Logger.log("%@: action '%@' handled by %@".fmt(this,a,this.responderNameFor(d))):SC.Logger.log("%@:  action '%@' NOT HANDLED".fmt(this,a))),this._locked=NO;if(h=this._pendingResponder)this._pendingResponder=null,this.makeFirstResponder(h);return d}},SC.CheckboxSupport={change:function(){this.notifyPropertyChange("value")},value:function(a,b){b!==undefined?this.$("input").attr("checked",b):b=this.$("input").attr("checked");return b}.property().idempotent()},SC.TextFieldSupport={value:function(a,b){b!==undefined?this.$("input").val(b):b=this.$("input").val();return b}.property().idempotent(),willLoseFirstResponder:function(){this.notifyPropertyChange("value")},keyUp:function(a){if(a.keyCode===13)return this.tryToPerform("insertNewline",a);if(a.keyCode===27)return this.tryToPerform("cancel",a)}},SC.Application=SC.Responder.extend(SC.ResponderContext,{}),SC.BENCHMARK_LOG_READY=YES,SC.mixin({isReady:NO,suppressOnReady:SC.suppressOnReady?YES:NO,suppressMain:SC.suppressMain?YES:NO,ready:function(a,b){var c=SC._readyQueue;b===undefined?(b=a,a=null):SC.typeOf(b)===SC.T_STRING&&(b=a[b]),SC.isReady?jQuery(document).ready(function(){b.call(a)}):(c||(SC._readyQueue=[]),SC._readyQueue.push(function(){b.call(a)}));return this},onReady:{done:function(){if(!SC.isReady){SC.isReady=!0,SC.RunLoop.begin(),SC.Locale.createCurrentLocale(),jQuery("body").addClass(SC.Locale.currentLanguage.toLowerCase()),jQuery("#loading").remove();var a=SC._readyQueue,b,c;if(a){for(b=0,c=a.length;b<c;b++)a[b].call();SC._readyQueue=null}window.main&&SC.typeOf(window.main)===SC.T_FUNCTION&&!SC.suppressMain&&SC.mode===SC.APP_MODE&&window.main(),SC.RunLoop.end()}}}}),SC.suppressOnReady||(jQuery.event.special.ready._default=SC.onReady.done),SC.APP_MODE="APP_MODE",SC.TEST_MODE="TEST_MODE",SC.mode=SC.APP_MODE,sc_require("system/responder"),sc_require("system/string"),SC.CoreView=SC.Responder.extend({concatenatedProperties:["classNames"],parentView:null,isVisible:!0,childViews:[],element:function(a,b){if(b!==undefined)return b;var c=this.get("parentView");c&&(c=c.get("element"));if(c)return this.findElementInParentElement(c)}.property("parentView").cacheable(),$:function(a){var b=this.get("element");return b?a===undefined?SC.$(b):SC.$(a,b):SC.$()},appendTo:function(a){var b=this.get("element");b||this.createElement(),this.$().appendTo(a);return this},append:function(){return this.appendTo(document.body)},remove:function(){this.$().remove(),this.destroyElement()},elementId:function(a,b){if(b)return b;return SC.guidFor(this)}.property().cacheable(),findElementInParentElement:function(a){var b="#"+this.get("elementId");return jQuery(b)[0]||jQuery(b,a)[0]},renderContext:function(a){return SC.RenderContext(a)},createElement:function(){if(this.get("element"))return this;var a=this.renderContext(this.get("tagName"));this.renderToContext(a),this.set("element",a.element()),this._notifyDidCreateElement();return this},didCreateElement:function(){},_notifyDidCreateElement:function(){var a=this.get("childViews"),b;this.didCreateElement();for(var c=0,d=a.get("length");c<d;++c){b=a[c];if(!b)continue;b._notifyDidCreateElement()}},destroyElement:function(){var a=this.get("element");a&&(this._notifyWillDestroyElement(),SC.$(a).remove(),this.set("element",null));return this},_sccv_elementDidChange:function(){var a,b,c=this.get("childViews");b=c.get("length");for(a=0;a<b;a++)c[a].notifyPropertyChange("element")}.observes("element"),willDestroyElement:function(){},_notifyWillDestroyElement:function(){this.willDestroyElement();var a,b,c=this.get("childViews");a=c.length;for(b=0;b<a;++b)c[b]._notifyWillDestroyElement()},parentViewDidChange:function(){},renderToContext:function(a,b){var c,d,e,f;this.beginPropertyChanges(),this.set("elementNeedsUpdate",NO),SC.none(b)&&(b=YES),this._renderElementSettings(a),c=!this.update,c?this.render(a,b):b?this.render(a):this.update(a.$()),b&&!this._didRenderChildViews&&this.renderChildViews(a,b),this._didRenderChildViews=NO,this.endPropertyChanges()},_renderElementSettings:function(a){a.resetClassNames(),a.resetStyles(),this.applyAttributesToContext(a)},applyAttributesToContext:function(a){a.addClass(this.get("classNames")),this.get("isTextSelectable")&&a.addClass("allow-select"),this.get("isVisible")||a.addClass("sc-hidden"),this.get("isFirstResponder")&&a.addClass("focus"),a.id(this.get("elementId")),a.attr("role",this.get("ariaRole"))},prepareContext:function(a,b){b!==!1&&(b=YES),b?this.renderToContext(a):this.updateElement(a)},renderChildViews:function(a,b){var c=this.get("childViews"),d=c.length,e,f;for(e=0;e<d;++e){f=c[e];if(!f)continue;a=a.begin(f.get("tagName")),f.renderToContext(a,b),a=a.end()}this._didRenderChildViews=YES;return a},render:function(){},tagName:"div",ariaRole:null,classNames:["sc-view"],displayProperties:["isVisible"],init:function(){var a=this.get("parentView"),b,c,d,e;arguments.callee.base.apply(this,arguments),SC.View.views[this.get("elementId")]=this,this.childViews=this.get("childViews").slice(),this.createChildViews(),e=this.get("displayProperties");for(var f=0,g=e.length;f<g;f++)this.addObserver(e[f],this,this.displayDidChange)},awake:function(){arguments.callee.base.apply(this,arguments);var a=this.get("childViews"),b=a.length,c;for(c=0;c<b;++c){if(!a[c])continue;a[c].awake()}},displayDidChange:function(){this.updateElement();return this},updateElement:function(a){var b,c,d,e,f=a||this.renderContext(this.get("element"));this._renderElementSettings(f,NO),e=!this.update,e?this.render(f,NO):this.update(f.$()),f.update(),this.didUpdateLayer&&this.didUpdateLayer();return this},frame:function(){return this.computeFrameWithParentFrame(null)}.property("useStaticLayout").cacheable(),computeFrameWithParentFrame:function(){var a,b=this.get("parentView"),c;if(a=this.get("element")){c=SC.offset(a),b&&(c=b.convertFrameFromView(c,null)),c.width=a.offsetWidth,c.height=a.offsetHeight;return c}return this.get("hasLayout")?null:{x:0,y:0,width:0,height:0}},_sc_view_clippingFrameDidChange:function(){var a=this.get("childViews"),b=a.length,c,d;for(c=0;c<b;++c)d=a[c],d.notifyPropertyChange("clippingFrame"),d._sc_view_clippingFrameDidChange()},removeChild:function(a){a.set("parentView",null);var b=this.get("childViews"),c=b.indexOf(a);c>=0&&b.removeAt(c);return this},removeAllChildren:function(){var a=this.get("childViews"),b;while(b=a.objectAt(a.get("length")-1))this.removeChild(b);return this},removeFromParent:function(){var a=this.get("parentView");a&&a.removeChild(this);return this},destroy:function(){if(this.get("isDestroyed"))return this;this._destroy(),this.get("parentView")&&this.removeFromParent(),arguments.callee.base.apply(this,arguments);return this},_destroy:function(){if(this.get("isDestroyed"))return this;this.destroyElement();var a=this.get("childViews"),b=a.length,c;if(b){a=a.slice();for(c=0;c<b;++c)a[c].destroy()}delete SC.View.views[this.get("layerId")],delete this._CQ,delete this.page;return this},createChildViews:function(){var a=this.get("childViews"),b=a.length,c,d,e,f;this.beginPropertyChanges();for(c=0;c<b;++c){if(d=f=a[c]){typeof d===SC.T_STRING?f=this[d]:d=null;if(!f){SC.Logger.error("No view with name "+d+" has been found in "+this.toString());continue}f=this.createChildView(f),d&&(this[d]=f)}a[c]=f}this.endPropertyChanges();return this},createChildView:function(a,b){a.isClass?b?b=SC.clone(b):b={}:b=a,b.owner=b.parentView=this,b.page||(b.page=this.page),a.isClass&&(a=a.create(b)),a.hasVisibility&&a.set("isVisibleInWindow",this.get("isVisibleInWindow"));return a},isView:YES,selectStart:function(a){return this.get("isTextSelectable")},contextMenu:function(a){if(this.get("isContextMenuEnabled"))return YES}}),SC.View=SC.CoreView.extend({}),SC.View.views={},sc_require("system/ready"),sc_require("views/core_view"),sc_require("ext/handlebars"),sc_require("ext/handlebars/bind"),sc_require("ext/handlebars/collection"),sc_require("ext/handlebars/localization"),sc_require("ext/handlebars/view"),SC.TEMPLATES=SC.Object.create(),SC.TemplateView=SC.View.extend({templateName:null,templates:SC.TEMPLATES,template:function(a,b){if(b!==undefined)return b;var c=this.get("templateName"),d=this.get("templates").get(c);if(!d)return function(){return""};return d}.property("templateName").cacheable(),context:function(a,b){if(b!==undefined)return b;return this}.property().cacheable(),render:function(a){var b=this.get("template");this._didRenderChildViews=YES,a.push(b(this.get("context"),null,null,{view:this,isRenderData:!0}))},update:function(){},mouseDown:function(){if(this.mouseUp)return YES;return NO}}),SC.ready(function(){SC.$('script[type="text/x-sc-template"]').each(function(){var a=SC.$(this).attr("data-sc-template");SC.TEMPLATES[a]=SC.Handlebars.compile(SC.$(this).html()),SC.$(this).remove()})}),sc_require("views/template"),SC._BindableSpan=SC.TemplateView.extend({tagName:"span",shouldDisplayFunc:null,preserveContext:NO,displayTemplate:null,inverseTemplate:null,property:null,render:function(a){var b=this.get("shouldDisplayFunc"),c=this.get("property"),d=this.get("preserveContext"),e=this.get("previousContext"),f=this.get("inverseTemplate"),g=this.get("displayTemplate"),h=e.getPath(c);if(b(h)){this.set("template",g);if(d)this.set("context",e);else if(g)this.set("context",h);else{a.push(Handlebars.Utils.escapeExpression(h));return}}else f?(this.set("template",f),d?this.set("context",e):this.set("context",h)):this.set("template",function(){return""});return arguments.callee.base.apply(this,arguments)},rerender:function(){var a,b,c,d;c=this.get("childViews"),b=c.get("length");for(a=b-1;a>=0;a--)d=c[a],d.$().remove(),d.removeFromParent(),d.destroy();var e=this.renderContext(this.get("tagName")),f;this.renderToContext(e),f=e.element(),this.$().replaceWith(f),this.set("element",f),this._notifyDidCreateElement()}}),SC.Builder=function(a){return SC.Builder.create(a)},SC.Builder.create=function(a){var b=SC.mixin(SC.beget(this.fn),a||{});a.hasOwnProperty("toString")&&(b.toString=a.toString);var c=function(){var a=SC.beget(b);a.defaultClass=this,a.constructor=c;return a.init.apply(a,arguments)};c.fn=c.prototype=b,c.extend=SC.Builder.create,c.mixin=SC.Builder.mixin;return c},SC.Builder.mixin=function(){var a=arguments.length,b;for(b=0;b<a;b++)SC.mixin(this,arguments[b]);return this},SC.Builder.fn={init:function(a){if(a!==undefined)if(SC.typeOf(a)===SC.T_ARRAY){var b=a.length;while(--b>=0)this[b]=a.objectAt?a.objectAt(b):a[b];this.length=a.length}else this[0]=a,this.length=1;return this},size:function(){return this.length},pushStack:function(){var a=this.constructor.apply(this,arguments);a.prevObject=this;return a},end:function(){return this.prevObject||this.constructor()},toString:function(){return"%@$(%@)".fmt(this.defaultClass.toString(),SC.A(this).invoke("toString").join(","))},mixin:SC.Builder.mixin},function(){var a=SC.Enumerable,b=SC.Builder.fn,c,d;for(c in a){if(!a.hasOwnProperty(c))continue;d=Array.prototype[c]||a[c],b[c]=d}}(),sc_require("system/builder"),SC.$=SC.CoreQuery=jQuery,SC.mixin(SC.$.fn,{isCoreQuery:YES,toString:function(){var a=[],b=this.length,c=0;for(c=0;c<b;c++)a[c]="%@: %@".fmt(c,this[c]?this[c].toString():"(null)");return"<$:%@>(%@)".fmt(SC.guidFor(this),a.join(" , "))},isVisible:function(){return Array.prototype.every.call(this,function(a){return SC.$.isVisible(a)})},view:function(){return this.map(function(){var a=null,b=SC.viewKey,c=this,d;while(!a&&c&&c!==document)c.nodeType===1&&(d=c.getAttribute("id"))&&(a=SC.View.views[d]),c=c.parentNode;c=null;return a})},within:function(a){if(this.filter(a).length)return!0;return!!this.has(a).length}}),function(){var a={},b={find:function(b,c){return c!==undefined?SC.Enumerable.find.call(this,b,c):a.find.call(this,b)},filter:function(b,c){return c!==undefined?this.pushStack(SC.Enumerable.filter.call(this,b,c)):a.filter.call(this,b)},filterProperty:function(a,b){return this.pushStack(SC.Enumerable.filterProperty.call(this,a,b))},indexOf:SC.$.index,map:function(b,c){return c!==undefined?SC.Enumerable.map.call(this,b,c):a.map.call(this,b)}},c=SC.$.fn,d=SC.Enumerable,e;for(var f in d)d.hasOwnProperty(f)&&(e=d[f],f in b&&(a[f]=c[f],e=b[f]),c[f]=e)}(),SC.mixin(SC.$,{isVisible:function(a){var b=SC.$;return"hidden"!=a.type&&b.css(a,"display")!="none"&&b.css(a,"visibility")!="hidden"}}),SC.Page=SC.Object.extend({owner:null,get:function(a){var b=this[a];if(b&&b.isClass){this[a]=b=b.create({page:this}),this.get("inDesignMode")||b.awake();return b}return arguments.callee.base.apply(this,arguments)},awake:function(){var a,b;for(b in this){if(!this.hasOwnProperty(b))continue;a=this[b],a&&a.isViewClass&&(this[b]=a=a.create({page:this}))}return this},getIfConfigured:function(a){var b=this[a];return b&&b.isViewClass?null:this.get(a)},loc:function(a){var b,c;for(c in a){if(!a.hasOwnProperty(c))continue;b=this[c];if(!b||!b.isViewClass)continue;b.loc(a[c])}return this}}),SC.Page.design=SC.Page.create,SC.Page.localization=function(a){return a},sc_require("system/builder"),SC.MODE_REPLACE="replace",SC.MODE_APPEND="append",SC.MODE_PREPEND="prepend",SC.NON_PIXEL_PROPERTIES=["zIndex","fontWeight","opacity"],SC.COMBO_STYLES={WebkitTransition:["WebkitTransitionProperty","WebkitTransitionDuration","WebkitTransitionDelay","WebkitTransitionTimingFunction"]},SC.RenderContext=SC.Builder.create({SELF_CLOSING:SC.CoreSet.create().addEach(["area","base","basefront","br","hr","input","img","link","meta"]),init:function(a,b){var c,d;b&&(this.prevObject=b,this.strings=b.strings,this.offset=b.length+b.offset),this.strings||(this.strings=[]),a===undefined?(a="div",d=YES):a==="div"||a==="label"||a==="a"?d=YES:SC.typeOf(a)===SC.T_STRING&&(a=a.toLowerCase(),d=YES);if(d){this._tagName=a,this._needsTag=YES,this.needsContent=YES;var e=this;while(e)e.length++,e=e.prevObject;this.strings.push(null),this._selfClosing=this.SELF_CLOSING.contains(a)}else this._elem=a,this._needsTag=NO,this.length=0,this.needsContent=NO;return this},strings:null,offset:0,length:0,updateMode:SC.MODE_REPLACE,needsContent:NO,get:function(a){var b=this.strings||[];return a===undefined?b.slice(this.offset,this.length):b[a+this.offset]},push:function(a){var b=this.strings,c=arguments.length;b||(this.strings=b=[]),c>1?b.push.apply(b,arguments):b.push(a);var d=this;while(d)d.length+=c,d=d.prevObject;this.needsContent=YES;return this},text:function(a){var b=arguments.length,c=0;for(c=0;c<b;c++)this.push(SC.RenderContext.escapeHTML(arguments[c]));return this},join:function(a){this._needsTag&&this.end();var b=this.strings;return b?b.join(a||""):""},begin:function(a){return SC.RenderContext(a,this)},element:function(){if(this._elem)return this._elem;var a=SC.RenderContext,b=a.factory,c,d;b||(b=a.factory=document.createElement("div")),b.innerHTML=this.join(),SC.browser.msie?b.innerHTML.length>0?(d=b.firstChild.cloneNode(!0),b.innerHTML=""):d=null:d=b.firstChild;return d},remove:function(a){if(!!a){var b,c=this._elem;if(!c||!c.removeChild)return;b=document.getElementById(a),b&&(b=c.removeChild(b),b=null)}},update:function(){var a=this._elem,b=this.updateMode,c,d,e,f,g,h,i,j,k;this._innerHTMLReplaced=NO;if(!!a){c=this.$();if(this.length>0){this._innerHTMLReplaced=YES;if(b===SC.MODE_REPLACE)c.html(this.join());else{h=a.cloneNode(!1),h.innerHTML=this.join(),k=b===SC.MODE_APPEND?null:a.firstChild,i=h.firstChild;while(i)j=i.nextSibling,a.insertBefore(i,j),i=j;i=j=h=k=null}}this._idDidChange&&(e=this._id)&&c.attr("id",e),jQuery.Buffer.flush(),a=this._elem=null;return this.prevObject||this}},_DEFAULT_ATTRS:{},_TAG_ARRAY:[],_JOIN_ARRAY:[],_STYLE_PAIR_ARRAY:[],end:function(){var a=this._TAG_ARRAY,b,c,d,e,f=this._attrs,g=this._classNames,h=this._id,i=this._styles;a[0]="<",a[1]=this._tagName;if(f||g||i||h){f||(f=this._DEFAULT_ATTRS),h&&(f.id=h),g&&(f["class"]=g.join(" "));if(i){c=this._JOIN_ARRAY,b=this._STYLE_PAIR_ARRAY;for(d in i){if(!i.hasOwnProperty(d))continue;e=i[d];if(e===null)continue;typeof e===SC.T_NUMBER&&!SC.NON_PIXEL_PROPERTIES.contains(d)&&(e+="px"),b[0]=this._dasherizeStyleName(d),b[1]=e,c.push(b.join(": "))}f.style=c.join("; "),c.length=0}a.push(" ");for(d in f){if(!f.hasOwnProperty(d))continue;e=f[d];if(e===null)continue;a.push(d,'="',e,'" ')}f===this._DEFAULT_ATTRS&&(delete f.style,delete f["class"],delete f.id)}var j=this.strings,k=this._selfClosing===NO?NO:this.length===1;a.push(k?" />":">"),j[this.offset]=a.join(""),a.length=0;if(!k){a[0]="</",a[1]=this._tagName,a[2]=">",j.push(a.join(""));var l=this;while(l)l.length++,l=l.prevObject;a.length=0}this._elem=null;return this.prevObject||this},tag:function(a,b){return this.begin(a,b).end()},tagName:function(a){if(a===undefined){!this._tagName&&this._elem&&(this._tagName=this._elem.tagName);return this._tagName}this._tagName=a,this._tagNameDidChange=YES;return this},id:function(a){if(a===undefined){!this._id&&this._elem&&(this._id=this._elem.id);return this._id}this._id=a,this._idDidChange=YES;return this},classNames:function(a,b){if(this._elem){if(a){this.$().resetClassNames().addClass(a);return this}return this.$().attr("class").split(" ")}if(a===undefined){this._cloneClassNames&&(this._classNames=(this._classNames||[]).slice(),this._cloneClassNames=NO),this._classNames||(this._classNames=[]);return this._classNames}this._classNames=a,this._cloneClassNames=b||NO,this._classNamesDidChange=YES;return this},hasClass:function(a){if(this._elem)return this.$().hasClass(a);return this.classNames().indexOf(a)>=0},addClass:function(a){if(a===undefined||a===null){SC.Logger.warn("You are adding an undefined or empty class"+this.toString());return this}if(this._elem){if(SC.typeOf(a)===SC.T_STRING)this.$().addClass(a);else{var b,c=a.length;for(b=0;b<c;b++)this.$().addClass(a[b])}return this}var d=this.classNames();if(SC.typeOf(a)===SC.T_STRING)d.indexOf(a)<0&&(d.push(a),this._classNamesDidChange=YES);else for(var e=0,f=a.length;e<f;e++){var g=a[e];d.indexOf(g)<0&&(d.push(g),this._classNamesDidChange=YES)}return this},removeClass:function(a){if(this._elem){this.$().removeClass(a);return this}var b=this._classNames,c;b&&(c=b.indexOf(a))>=0&&(this._cloneClassNames&&(b=this._classNames=b.slice(),this._cloneClassNames=NO),b[c]=null,this._classNamesDidChange=YES);return this},resetClassNames:function(){if(this._elem){this.$().resetClassNames();return this}this._classNames=[],this._classNamesDidChange=YES;return this},setClass:function(a,b){if(this._elem){this.$().setClass(a,b);return this}var c,d,e,f;if(b!==undefined)return b?this.addClass(a):this.removeClass(a);c=this._classNames,c||(c=this._classNames=[]),this._cloneClassNames&&(c=this._classNames=c.slice(),this._cloneClassNames=NO),f=NO;for(e in a){if(!a.hasOwnProperty(e))continue;d=c.indexOf(e),a[e]?d<0&&(c.push(e),f=YES):d>=0&&(c[d]=null,f=YES)}f&&(this._classNamesDidChange=YES);return this},_STYLE_REGEX:/-?\s*([^:\s]+)\s*:\s*([^;]+)\s*;?/g,styles:function(a,b){if(this._elem){a&&this.$().resetStyles().css(a);return this.$().styles()}var c,d,e;if(a===undefined){if(!this._styles&&this._elem){c=this.$().attr("style");if(c&&(c=c.toString()).length>0){SC.browser.msie&&(c=c.toLowerCase()),a={},d=this._STYLE_REGEX,d.lastIndex=0;while(e=d.exec(c))a[this._camelizeStyleName(e[1])]=e[2];this._styles=a,this._cloneStyles=NO}else this._styles={}}else this._styles?this._cloneStyles&&(this._styles=SC.clone(this._styles),this._cloneStyles=NO):this._styles={};return this._styles}this._styles=a,this._cloneStyles=b||NO,this._stylesDidChange=YES;return this},_deleteComboStyles:function(a,b){var c=SC.COMBO_STYLES[b],d=NO;if(c){var e;for(e=0;e<c.length;e++)a[c[e]]&&(delete a[c[e]],d=YES)}return d},resetStyles:function(){this.styles({});return this},addStyle:function(a,b){if(this._elem){this.$().css(a,b);return this}var c,d=NO,e=this.styles();if(typeof a===SC.T_STRING){if(b===undefined)return e[a];d=this._deleteComboStyles(e,a),e[a]!==b&&(e[a]=b,d=YES),d&&(this._stylesDidChange=YES)}else{for(c in a){if(!a.hasOwnProperty(c))continue;d=d||this._deleteComboStyles(e,c),b=a[c],e[c]!==b&&(e[c]=b,d=YES)}d&&(this._stylesDidChange=YES)}return this},removeStyle:function(a){if(this._elem){this.$().css(a,null);return this}if(!this._styles)return this;var b=this.styles();b[a]&&(b[a]=null,this._stylesDidChange=YES)},attr:function(a,b){if(this._elem){this.$().attr(a,b);return this}var c,d=this._attrs,e=NO;d||(this._attrs=d={});if(typeof a===SC.T_STRING){if(b===undefined)return d[a];d[a]!==b&&(d[a]=b,this._attrsDidChange=YES)}else{for(c in a){if(!a.hasOwnProperty(c))continue;b=a[c],d[c]!==b&&(d[c]=b,e=YES)}e&&(this._attrsDidChange=YES)}return this},$:function(a){var b,c=this._elem;b=c?a===undefined?SC.$.buffer(c):SC.$.buffer(a,c):SC.$.buffer([]),c=null;return b},_camelizeStyleName:function(a){var b=a.match(/^-(webkit|moz|o)-/),c=SC.String.camelize(a);return b?c.substr(0,1).toUpperCase()+c.substr(1):c},_dasherizeStyleName:function(a){var b=SC.String.dasherize(a);b.match(/^(webkit|moz|ms|o)-/)&&(b="-"+b);return b}}),SC.RenderContext.fn.html=SC.RenderContext.fn.push,SC.RenderContext.fn.css=SC.RenderContext.fn.addStyle,SC.RenderContext.escapeHTML=function(a){var b,c,d;if(SC.none(a))return a;b=this.escapeHTMLElement,b||(b=this.escapeHTMLElement=document.createElement("div")),c=this.escapeTextNode,c||(c=this.escapeTextNode=document.createTextNode(""),b.appendChild(c)),c.data=a,d=b.innerHTML,c=b=null;return d},SC.RootResponder=SC.Object.extend({setup:function(){var a,b={touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd",touchcancel:"touchCancel",keydown:"keyDown",keyup:"keyUp",keypress:"keyPress",mousedown:"mouseDown",mouseup:"mouseUp",click:"click",dblclick:"doubleClick",mousemove:"mouseMove",focusin:"focusIn",focusout:"focusOut",mouseenter:"mouseEntered",mouseleave:"mouseExited",change:"change"};for(a in b)b.hasOwnProperty(a)&&this.setupHandler(a,b[a])},setupHandler:function(a,b){SC.$(document).delegate(".sc-view",a,function(a){var c=SC.View.views[this.id],d=c[b],e;if(SC.typeOf(d)===SC.T_FUNCTION){e=d.call(c,a);if(e===!0)return!1}})},sendAction:function(a,b,c,d,e,f){b=this.targetForAction(a,b,c,d,f);return b&&b.isResponderContext?!!b.sendAction(a,c,e,f):b&&b.tryToPerform(a,c)},targetForAction:function(a,b,c,d,e){b&&(b=this.targetForPath(b,c));if(b.isResponderContext)return b;if(!b||!b.respondsTo(a))b=this.get("defaultResponder"),b=this.targetForPath(b);return b},targetForPath:function(a,b){return SC.typeOf(a)===SC.T_STRING?SC.objectForPropertyPath(target)||SC.objectForPropertyPath(target,b):a},defaultResponder:null}),SC.ready(SC.RootResponder,function(){var a=SC.RootResponder.responder=SC.RootResponder.create();a.setup()}),sc_require("views/template"),SC.TemplateCollectionView=SC.TemplateView.extend({tagName:"ul",content:null,template:SC.Handlebars.compile(""),emptyView:null,init:function(){var a=arguments.callee.base.apply(this,arguments);this._sctcv_contentDidChange();return a},didCreateElement:function(){var a=this.get("content");a&&this.arrayContentDidChange(0,0,a.get("length"))},itemView:"SC.TemplateView",itemViewTemplate:null,itemViewTemplateName
:null,itemContext:null,itemViewClass:function(){var a=this.get("itemView"),b=this.get("itemViewTemplate"),c=this.get("itemViewTemplateName"),d={};SC.typeOf(a)===SC.T_STRING&&(a=SC.objectForPropertyPath(a)),!b&&c&&(b=this.get("templates").get(c)),b&&(d.template=b);if(this.get("tagName")==="ul"||this.get("tagName")==="ol")d.tagName="li";return a.extend(d)}.property("itemView").cacheable(),_sctcv_contentDidChange:function(){this.$().empty();var a=this._content,b=0,c=this.get("content"),d=0;a&&(a.removeArrayObservers({target:this,willChange:"arrayContentWillChange",didChange:"arrayContentDidChange"}),b=a.get("length")),c&&(c.addArrayObservers({target:this,willChange:"arrayContentWillChange",didChange:"arrayContentDidChange"}),d=c.get("length")),this.arrayContentWillChange(0,b,d),this._content=this.get("content"),this.arrayContentDidChange(0,b,d)}.observes("content"),arrayContentWillChange:function(a,b,c){emptyView=this.get("emptyView"),emptyView&&(emptyView.$().remove(),emptyView.removeFromParent());var d=this.get("childViews"),e,f,g;g=d.get("length");for(f=a+b-1;f>=a;f--)e=d[f],e.$().remove(),e.removeFromParent(),e.destroy()},arrayContentDidChange:function(a,b,c){if(!!this.get("element")){var d=this.get("content"),e=this.get("itemViewClass"),f=this.get("childViews"),g=[],h,i,j,k,l,m,n,o,p,q=d.slice(a,a+c);j=this.get("itemViewOptions")||{},k=this.$(),l=k.find("li")[a-1]||null,p=q.get("length");var r={id:j.id,"class":j["class"],classBinding:j.classBinding};h=function(a){arguments.callee.base.apply(this,arguments),SC.Handlebars.ViewHelper.applyAttributes(r,this,a)},j=SC.clone(j),delete j.id,delete j["class"],delete j.classBinding;for(o=0;o<p;o++){m=q.objectAt(o),view=this.createChildView(e.extend(j,{content:m,render:h}));var s=view.get("contextProperty");s&&view.set("context",view.get(s)),n=view.createElement().$(),l?n.insertAfter(l):k.append(n),l=n,g.push(view)}f.replace(a,0,g);var t=this.get("inverseTemplate");f.get("length")===0&&t&&(view=this.createChildView(SC.TemplateView.extend({template:t,content:this})),this.set("emptyView",view),view.createElement().$().appendTo(k),this.childViews=[view]),this.invokeLast("invalidateFrame")}},invalidateFrame:function(){this.notifyPropertyChange("frame")}})
